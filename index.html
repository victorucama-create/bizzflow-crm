<!DOCTYPE html>
<html lang="pt-MZ">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bizz Flow CRM - Sistema de Gestão Empresarial Inteligente</title>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SEU_ID"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-SEU_ID');
    </script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    
    <style>
        :root {
            --bizzflow-primary: #1a5f7a;
            --bizzflow-secondary: #2a9d8f;
            --bizzflow-accent: #e9c46a;
            --bizzflow-warning: #f4a261;
            --bizzflow-danger: #e76f51;
            --bizzflow-success: #2a9d8f;
            --bizzflow-dark: #264653;
            --bizzflow-light: #f8f9fa;
            --bizzflow-gray: #6c757d;
            --bizzflow-gradient: linear-gradient(135deg, #1a5f7a 0%, #2a9d8f 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* Layout */
        .app-container {
            display: flex;
            min-height: 100vh;
            background: #f8fafc;
        }

        /* Sidebar com design moderno */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, var(--bizzflow-dark) 0%, #1a3c4f 100%);
            color: white;
            position: fixed;
            height: 100vh;
            padding: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            box-shadow: 4px 0 15px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
        }

        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
        }

        .sidebar-header {
            padding: 25px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background-color: rgba(0, 0, 0, 0.1);
        }

        .sidebar-header h2 {
            color: white;
            font-size: 1.6rem;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
        }

        .sidebar-header h2 i {
            color: var(--bizzflow-accent);
            background: rgba(233, 196, 106, 0.1);
            padding: 10px;
            border-radius: 10px;
            font-size: 1.4rem;
        }

        .sidebar-header span {
            color: var(--bizzflow-accent);
            font-weight: 800;
        }

        .sidebar-tagline {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 5px;
            padding-left: 52px;
        }

        .sidebar-menu {
            padding: 20px 0;
        }

        .menu-section {
            padding: 0 0 10px 0;
        }

        .menu-section-title {
            padding: 10px 25px;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: rgba(255, 255, 255, 0.5);
            font-weight: 600;
        }

        .menu-item {
            padding: 15px 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .menu-item:hover {
            background-color: rgba(255, 255, 255, 0.08);
            border-left: 4px solid var(--bizzflow-secondary);
            padding-left: 30px;
        }

        .menu-item.active {
            background-color: rgba(42, 157, 143, 0.15);
            border-left: 4px solid var(--bizzflow-secondary);
        }

        .menu-item i {
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
            color: var(--bizzflow-accent);
        }

        .menu-item .badge {
            position: absolute;
            right: 20px;
            background-color: var(--bizzflow-danger);
            color: white;
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: bold;
        }

        .menu-item span {
            font-weight: 500;
            font-size: 1rem;
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 25px;
            transition: all 0.3s;
            min-height: 100vh;
        }

        /* Topbar moderno */
        .topbar {
            background: white;
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border-left: 5px solid var(--bizzflow-secondary);
        }

        .page-title-area h1 {
            color: var(--bizzflow-dark);
            font-size: 1.8rem;
            margin-bottom: 5px;
            font-weight: 700;
        }

        .page-title-area p {
            color: var(--bizzflow-gray);
            font-size: 0.95rem;
        }

        .topbar-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(42, 157, 143, 0.1);
            padding: 8px 15px;
            border-radius: 50px;
            transition: all 0.3s;
        }

        .user-info:hover {
            background: rgba(42, 157, 143, 0.2);
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--bizzflow-primary), var(--bizzflow-secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 4px 10px rgba(26, 95, 122, 0.3);
        }

        .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            color: var(--bizzflow-dark);
        }

        .user-role {
            font-size: 0.85rem;
            color: var(--bizzflow-gray);
        }

        /* Notification & Quick Action Icons */
        .topbar-icons {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .icon-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: white;
            border: 1px solid #eaeaea;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--bizzflow-dark);
            position: relative;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .icon-btn:hover {
            background: var(--bizzflow-primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(26, 95, 122, 0.3);
        }

        .notification-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: var(--bizzflow-danger);
            color: white;
            font-size: 0.65rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Stats Cards Modernos */
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            border-top: 4px solid transparent;
        }

        .stat-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .stat-card:nth-child(1) {
            border-top-color: var(--bizzflow-primary);
        }

        .stat-card:nth-child(2) {
            border-top-color: var(--bizzflow-success);
        }

        .stat-card:nth-child(3) {
            border-top-color: var(--bizzflow-warning);
        }

        .stat-card:nth-child(4) {
            border-top-color: var(--bizzflow-danger);
        }

        .stat-icon {
            width: 70px;
            height: 70px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
            flex-shrink: 0;
        }

        .stat-card:nth-child(1) .stat-icon {
            background: linear-gradient(135deg, var(--bizzflow-primary), #2a7a9a);
        }

        .stat-card:nth-child(2) .stat-icon {
            background: linear-gradient(135deg, var(--bizzflow-success), #3bb4a2);
        }

        .stat-card:nth-child(3) .stat-icon {
            background: linear-gradient(135deg, var(--bizzflow-warning), #f6b85d);
        }

        .stat-card:nth-child(4) .stat-icon {
            background: linear-gradient(135deg, var(--bizzflow-danger), #ec8a75);
        }

        .stat-info {
            flex: 1;
        }

        .stat-info h3 {
            font-size: 2.2rem;
            margin-bottom: 5px;
            color: var(--bizzflow-dark);
            font-weight: 700;
        }

        .stat-info p {
            color: var(--bizzflow-gray);
            font-size: 0.95rem;
            margin-bottom: 8px;
        }

        .stat-trend {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .trend-up {
            color: #2ecc71;
        }

        .trend-down {
            color: #e74c3c;
        }

        /* Content Boxes */
        .content-box {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid #f0f0f0;
            transition: all 0.3s;
        }

        .content-box:hover {
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
        }

        .content-header h2 {
            color: var(--bizzflow-dark);
            font-size: 1.4rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .content-header h2 i {
            color: var(--bizzflow-secondary);
        }

        /* Tabelas modernas */
        .table-container {
            overflow-x: auto;
            border-radius: 10px;
            border: 1px solid #f0f0f0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }

        th {
            background-color: #f8fafc;
            padding: 18px 15px;
            text-align: left;
            font-weight: 600;
            color: var(--bizzflow-dark);
            border-bottom: 2px solid #eaeaea;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        td {
            padding: 18px 15px;
            border-bottom: 1px solid #f5f5f5;
            color: #555;
        }

        tr:hover {
            background-color: #f9fbfd;
        }

        /* Botões estilizados */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            font-size: 0.95rem;
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }

        .btn:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }

        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--bizzflow-primary), var(--bizzflow-secondary));
            color: white;
            box-shadow: 0 4px 10px rgba(42, 157, 143, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(42, 157, 143, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            box-shadow: 0 4px 10px rgba(46, 204, 113, 0.3);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #f1c40f);
            color: white;
            box-shadow: 0 4px 10px rgba(243, 156, 18, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--bizzflow-primary);
            color: var(--bizzflow-primary);
        }

        .btn-outline:hover {
            background: var(--bizzflow-primary);
            color: white;
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 0.85rem;
        }

        .btn-lg {
            padding: 15px 30px;
            font-size: 1.1rem;
        }

        /* Formulários estilizados */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--bizzflow-dark);
            font-size: 0.95rem;
        }

        .form-control {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
            background-color: white;
        }

        .form-control:focus {
            border-color: var(--bizzflow-secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(42, 157, 143, 0.1);
        }

        /* Modais */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            animation: slideUp 0.4s cubic-bezier(0.18, 0.89, 0.32, 1.28);
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
        }

        .modal-header h2 {
            color: var(--bizzflow-dark);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.8rem;
            color: var(--bizzflow-gray);
            cursor: pointer;
            transition: all 0.3s;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background-color: #f5f5f5;
            color: var(--bizzflow-danger);
        }

        /* Página de Login */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--bizzflow-primary) 0%, var(--bizzflow-dark) 100%);
            padding: 20px;
        }

        .login-box {
            background: white;
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 450px;
            text-align: center;
            animation: slideUp 0.5s ease-out;
        }

        .login-logo {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-logo h1 {
            color: var(--bizzflow-primary);
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .login-logo p {
            color: var(--bizzflow-gray);
            font-size: 1rem;
            margin-top: 10px;
        }

        .login-form {
            margin-top: 30px;
        }

        /* Badges */
        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
        }

        .badge-success {
            background-color: #d4edda;
            color: #155724;
        }

        .badge-warning {
            background-color: #fff3cd;
            color: #856404;
        }

        .badge-danger {
            background-color: #f8d7da;
            color: #721c24;
        }

        .badge-info {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        .badge-primary {
            background-color: #d1e7ff;
            color: #004085;
        }

        /* Cores da bandeira de Moçambique */
        .mz-flag-green {
            color: #007168;
        }

        .mz-flag-yellow {
            color: #f7d518;
        }

        .mz-flag-black {
            color: #000000;
        }

        .mz-flag-red {
            color: #dc241f;
        }

        /* Responsividade */
        @media (max-width: 1200px) {
            .stats-cards {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 992px) {
            .sidebar {
                width: 80px;
                overflow: visible;
            }
            
            .sidebar-header h2 span,
            .sidebar-tagline,
            .menu-item span,
            .menu-section-title,
            .user-details,
            .menu-item .badge {
                display: none;
            }
            
            .sidebar-header {
                padding: 20px 15px;
            }
            
            .sidebar-header h2 {
                justify-content: center;
            }
            
            .menu-item {
                padding: 20px;
                justify-content: center;
                border-left: none;
                border-right: 4px solid transparent;
            }
            
            .menu-item:hover,
            .menu-item.active {
                border-left: none;
                border-right: 4px solid var(--bizzflow-secondary);
                padding-right: 24px;
            }
            
            .main-content {
                margin-left: 80px;
                padding: 20px;
            }
            
            .topbar {
                padding: 15px 20px;
            }
        }

        @media (max-width: 768px) {
            .stats-cards {
                grid-template-columns: 1fr;
            }
            
            .topbar {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .topbar-actions {
                width: 100%;
                justify-content: space-between;
            }
            
            .main-content {
                padding: 15px;
            }
        }

        @media (max-width: 576px) {
            .login-box {
                padding: 30px 20px;
            }
            
            .modal-content {
                padding: 20px;
                width: 95%;
            }
        }

        /* Animações */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Tooltips */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: var(--bizzflow-dark);
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .tooltip .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--bizzflow-dark) transparent transparent transparent;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Progress bars */
        .progress {
            height: 8px;
            background-color: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--bizzflow-primary), var(--bizzflow-secondary));
            border-radius: 4px;
            transition: width 0.6s ease;
        }

        /* Cards de funcionalidades */
        .feature-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .feature-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s;
            border-top: 4px solid var(--bizzflow-secondary);
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .feature-card i {
            font-size: 2.5rem;
            color: var(--bizzflow-secondary);
            margin-bottom: 20px;
            background: rgba(42, 157, 143, 0.1);
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
        }

        .feature-card h3 {
            color: var(--bizzflow-dark);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .feature-card p {
            color: var(--bizzflow-gray);
            line-height: 1.6;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid #eaeaea;
            margin-bottom: 25px;
            overflow-x: auto;
        }

        .tab {
            padding: 15px 25px;
            cursor: pointer;
            font-weight: 600;
            color: var(--bizzflow-gray);
            border-bottom: 3px solid transparent;
            white-space: nowrap;
            transition: all 0.3s;
        }

        .tab:hover {
            color: var(--bizzflow-primary);
        }

        .tab.active {
            color: var(--bizzflow-primary);
            border-bottom-color: var(--bizzflow-primary);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        /* Alertas */
        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideInRight 0.5s ease-out;
        }

        @keyframes slideInRight {
            from { transform: translateX(20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .alert-success {
            background-color: #d4edda;
            border-left: 5px solid #28a745;
            color: #155724;
        }

        .alert-warning {
            background-color: #fff3cd;
            border-left: 5px solid #ffc107;
            color: #856404;
        }

        .alert-danger {
            background-color: #f8d7da;
            border-left: 5px solid #dc3545;
            color: #721c24;
        }

        .alert-info {
            background-color: #d1ecf1;
            border-left: 5px solid #17a2b8;
            color: #0c5460;
        }

        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(42, 157, 143, 0.2);
            border-radius: 50%;
            border-top-color: var(--bizzflow-secondary);
            animation: spin 1s ease-in-out infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Estilos para planos e assinaturas */
        .plans-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .plan-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
            border: 2px solid #eaeaea;
            position: relative;
            overflow: hidden;
        }

        .plan-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
        }

        .plan-card.popular {
            border-color: var(--bizzflow-secondary);
            transform: scale(1.05);
        }

        .plan-card.popular:hover {
            transform: scale(1.05) translateY(-5px);
        }

        .plan-badge {
            position: absolute;
            top: 0;
            right: 0;
            background: var(--bizzflow-secondary);
            color: white;
            padding: 8px 20px;
            border-radius: 0 15px 0 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .plan-price {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--bizzflow-dark);
            margin: 20px 0;
        }

        .plan-price span {
            font-size: 1rem;
            color: var(--bizzflow-gray);
        }

        .plan-features {
            list-style: none;
            padding: 0;
            margin: 20px 0;
        }

        .plan-features li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .plan-features li i {
            color: var(--bizzflow-success);
        }

        /* Estilos para importação/exportação */
        .import-export-box {
            background: #f8f9fa;
            border: 2px dashed #ddd;
            border-radius: 10px;
            padding: 40px 20px;
            text-align: center;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .import-export-box:hover {
            background: #e9ecef;
            border-color: var(--bizzflow-primary);
        }

        .file-upload-area {
            background: white;
            border: 2px dashed var(--bizzflow-secondary);
            border-radius: 10px;
            padding: 40px 20px;
            text-align: center;
            margin: 20px 0;
            transition: all 0.3s;
        }

        .file-upload-area.drag-over {
            background: #f0f9ff;
            border-color: var(--bizzflow-primary);
        }

        /* Estilos para templates */
        .template-download {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .template-info h4 {
            margin-bottom: 5px;
            color: var(--bizzflow-dark);
        }

        .template-info p {
            color: var(--bizzflow-gray);
            font-size: 0.9rem;
        }

        /* Estilos para status de assinatura */
        .subscription-status {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.85rem;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-trial {
            background: #fff3cd;
            color: #856404;
        }

        .status-expired {
            background: #f8d7da;
            color: #721c24;
        }

        .status-pending {
            background: #cce5ff;
            color: #004085;
        }
    </style>
</head>
<body>
    <!-- Tela de Login (Visível Inicialmente) -->
    <div id="loginScreen" class="login-container">
        <div class="login-box">
            <div class="login-logo">
                <h1><i class="fas fa-chart-line mz-flag-green"></i> <span class="mz-flag-yellow">Bizz</span> <span class="mz-flag-red">Flow</span></h1>
                <p class="mz-flag-black">Sistema de Gestão Empresarial Inteligente</p>
                <p style="font-size: 0.9rem; color: #666; margin-top: 5px;">Edição Premium Moçambique</p>
            </div>
            
            <div class="tabs" style="margin-top: 20px;">
                <div class="tab active" data-tab="login">Login</div>
                <div class="tab" data-tab="investor">Área do Investidor</div>
                <div class="tab" data-tab="customer">Área do Cliente</div>
            </div>
            
            <!-- Login Tab -->
            <div id="loginTab" class="tab-content active">
                <form id="loginForm" class="login-form">
                    <div class="form-group">
                        <label for="username">Nome de Utilizador</label>
                        <input type="text" id="username" class="form-control" placeholder="admin" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Senha</label>
                        <input type="password" id="password" class="form-control" placeholder="••••••••" required>
                    </div>
                    <div class="form-group" style="text-align: left;">
                        <label>
                            <input type="checkbox" id="rememberMe"> Lembrar-me
                        </label>
                    </div>
                    <button type="submit" class="btn btn-primary btn-lg" style="width: 100%;">
                        <i class="fas fa-sign-in-alt"></i> Entrar no Sistema
                    </button>
                </form>
                
                <div style="margin-top: 25px; text-align: center; color: #666;">
                    <p><strong>Credenciais de demonstração:</strong></p>
                    <p>Administrador: admin / admin123</p>
                    <p>Gestor: manager / manager123</p>
                    <p>Vendedor: seller / seller123</p>
                </div>
            </div>
            
            <!-- Investor Tab -->
            <div id="investorTab" class="tab-content">
                <div style="text-align: center; margin-bottom: 25px;">
                    <h3 style="color: var(--bizzflow-primary); margin-bottom: 15px;">Área do Investidor</h3>
                    <p style="color: var(--bizzflow-gray);">Acesso a relatórios financeiros, métricas de performance e dashboard de investimentos</p>
                </div>
                
                <form id="investorLoginForm">
                    <div class="form-group">
                        <label for="investorEmail">Email do Investidor</label>
                        <input type="email" id="investorEmail" class="form-control" placeholder="investidor@exemplo.com" required>
                    </div>
                    <div class="form-group">
                        <label for="investorPassword">Senha</label>
                        <input type="password" id="investorPassword" class="form-control" placeholder="••••••••" required>
                    </div>
                    <button type="submit" class="btn btn-success btn-lg" style="width: 100%;">
                        <i class="fas fa-chart-line"></i> Aceder Dashboard de Investimentos
                    </button>
                </form>
                
                <div style="margin-top: 20px; padding: 15px; background: rgba(42, 157, 143, 0.1); border-radius: 10px;">
                    <p style="font-size: 0.9rem; color: var(--bizzflow-dark);">
                        <i class="fas fa-info-circle"></i> <strong>Para Investidores:</strong> Aceda a relatórios detalhados de ROI, fluxo de caixa, métricas de crescimento e projeções financeiras.
                    </p>
                </div>
            </div>
            
            <!-- Customer Tab -->
            <div id="customerTab" class="tab-content">
                <div style="text-align: center; margin-bottom: 25px;">
                    <h3 style="color: var(--bizzflow-primary); margin-bottom: 15px;">Área do Cliente</h3>
                    <p style="color: var(--bizzflow-gray);">Acompanhe suas encomendas, histórico de compras e ofertas especiais</p>
                </div>
                
                <form id="customerLoginForm">
                    <div class="form-group">
                        <label for="customerPhone">Telefone ou Email</label>
                        <input type="text" id="customerPhone" class="form-control" placeholder="+258 84 123 4567 ou cliente@exemplo.com" required>
                    </div>
                    <div class="form-group">
                        <label for="customerCode">Código de Acesso</label>
                        <input type="password" id="customerCode" class="form-control" placeholder="Código do recibo ou senha" required>
                    </div>
                    <button type="submit" class="btn btn-warning btn-lg" style="width: 100%;">
                        <i class="fas fa-shopping-cart"></i> Aceder Minha Área
                    </button>
                </form>
                
                <div style="margin-top: 20px; text-align: center;">
                    <p style="color: var(--bizzflow-gray); font-size: 0.9rem;">É novo cliente? <a href="#" style="color: var(--bizzflow-primary); font-weight: 600;">Registe-se aqui</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Aplicação Principal (Oculta Inicialmente) -->
    <div id="appContainer" class="app-container" style="display: none;">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-chart-line"></i> <span>Bizz</span> <span style="color: var(--bizzflow-accent);">Flow</span></h2>
                <div class="sidebar-tagline">Gestão Empresarial Inteligente</div>
            </div>
            
            <div class="sidebar-menu">
                <div class="menu-section">
                    <div class="menu-section-title">Principal</div>
                    <div class="menu-item active" data-page="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                        <div class="badge">10</div>
                    </div>
                    <div class="menu-item" data-page="clientes">
                        <i class="fas fa-users"></i>
                        <span>Clientes</span>
                        <div class="badge">24</div>
                    </div>
                    <div class="menu-item" data-page="produtos">
                        <i class="fas fa-boxes"></i>
                        <span>Produtos</span>
                        <div class="badge">3</div>
                    </div>
                    <div class="menu-item" data-page="vendas">
                        <i class="fas fa-shopping-cart"></i>
                        <span>Vendas</span>
                    </div>
                </div>
                
                <div class="menu-section">
                    <div class="menu-section-title">Financeiro</div>
                    <div class="menu-item" data-page="financeiro">
                        <i class="fas fa-money-bill-wave"></i>
                        <span>Financeiro</span>
                    </div>
                    <div class="menu-item" data-page="relatorios">
                        <i class="fas fa-chart-bar"></i>
                        <span>Relatórios</span>
                    </div>
                    <div class="menu-item" data-page="investimentos">
                        <i class="fas fa-chart-line"></i>
                        <span>Investimentos</span>
                    </div>
                </div>
                
                <div class="menu-section">
                    <div class="menu-section-title">Assinaturas</div>
                    <div class="menu-item" data-page="planos">
                        <i class="fas fa-crown"></i>
                        <span>Planos</span>
                    </div>
                    <div class="menu-item" data-page="assinaturas">
                        <i class="fas fa-file-contract"></i>
                        <span>Assinaturas</span>
                        <div class="badge">5</div>
                    </div>
                    <div class="menu-item" data-page="exportar">
                        <i class="fas fa-file-export"></i>
                        <span>Importar/Exportar</span>
                    </div>
                </div>
                
                <div class="menu-section">
                    <div class="menu-section-title">Operações</div>
                    <div class="menu-item" data-page="stock">
                        <i class="fas fa-warehouse"></i>
                        <span>Gestão de Stock</span>
                    </div>
                    <div class="menu-item" data-page="fornecedores">
                        <i class="fas fa-truck"></i>
                        <span>Fornecedores</span>
                    </div>
                    <div class="menu-item" data-page="encomendas">
                        <i class="fas fa-clipboard-list"></i>
                        <span>Encomendas</span>
                    </div>
                </div>
                
                <div class="menu-section">
                    <div class="menu-section-title">Administração</div>
                    <div class="menu-item" data-page="equipa">
                        <i class="fas fa-user-tie"></i>
                        <span>Equipa</span>
                    </div>
                    <div class="menu-item" data-page="configuracoes">
                        <i class="fas fa-cog"></i>
                        <span>Configurações</span>
                    </div>
                    <div class="menu-item" data-page="suporte">
                        <i class="fas fa-headset"></i>
                        <span>Suporte</span>
                    </div>
                </div>
            </div>

            <div style="position: absolute; bottom: 0; width: 100%; padding: 20px; background: rgba(0, 0, 0, 0.1); border-top: 1px solid rgba(255, 255, 255, 0.1);">
                <div class="user-info" style="color: white; border: none; background: transparent; padding: 0;">
                    <div class="user-avatar" id="userAvatar">A</div>
                    <div class="user-details">
                        <div id="currentUserName" class="user-name">Administrador</div>
                        <div id="currentUserRole" class="user-role">Super Admin</div>
                    </div>
                </div>
                <button class="btn btn-danger" style="width: 100%; margin-top: 15px; border-radius: 8px;" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> <span>Sair</span>
                </button>
                <div style="text-align: center; margin-top: 15px;">
                    <div style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.6);">Bizz Flow v2.0</div>
                    <div style="font-size: 0.7rem; color: rgba(255, 255, 255, 0.5);">© 2024 Moçambique</div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Topbar -->
            <div class="topbar">
                <div class="page-title-area">
                    <h1 id="pageTitle">Dashboard</h1>
                    <p id="pageSubtitle">Visão geral do seu negócio em tempo real</p>
                </div>
                
                <div class="topbar-actions">
                    <div class="topbar-icons">
                        <div class="icon-btn tooltip" id="notificationBtn">
                            <i class="fas fa-bell"></i>
                            <div class="notification-badge">3</div>
                            <span class="tooltip-text">Notificações</span>
                        </div>
                        <div class="icon-btn tooltip" id="quickSaleBtn">
                            <i class="fas fa-cash-register"></i>
                            <span class="tooltip-text">Venda Rápida</span>
                        </div>
                        <div class="icon-btn tooltip" id="helpBtn">
                            <i class="fas fa-question-circle"></i>
                            <span class="tooltip-text">Ajuda</span>
                        </div>
                    </div>
                    
                    <div class="user-info">
                        <div class="user-avatar" id="topbarUserAvatar">A</div>
                        <div class="user-details">
                            <div id="topbarUserName" class="user-name">Administrador</div>
                            <div class="user-role">
                                <span id="currentDate" style="font-weight: 600;"></span>
                                <span style="margin-left: 10px;">Maputo, MZ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Page -->
            <div id="dashboardPage" class="page-content">
                <!-- Alertas -->
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>
                        <strong>Stock Baixo:</strong> 3 produtos estão com stock abaixo do mínimo recomendado.
                        <a href="#" style="margin-left: 10px; color: var(--bizzflow-primary); font-weight: 600;">Ver Produtos</a>
                    </div>
                </div>
                
                <!-- Stats Cards -->
                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalVendas">0 MZN</h3>
                            <p>Total de Vendas</p>
                            <div class="stat-trend trend-up">
                                <i class="fas fa-arrow-up"></i>
                                <span>12% vs mês anterior</span>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalClientes">0</h3>
                            <p>Clientes Registados</p>
                            <div class="stat-trend trend-up">
                                <i class="fas fa-arrow-up"></i>
                                <span>5% vs mês anterior</span>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-box"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalProdutos">0</h3>
                            <p>Produtos em Stock</p>
                            <div class="stat-trend trend-down">
                                <i class="fas fa-arrow-down"></i>
                                <span>8% vs mês anterior</span>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="vendasHoje">0</h3>
                            <p>Vendas Hoje</p>
                            <div class="stat-trend trend-up">
                                <i class="fas fa-arrow-up"></i>
                                <span>15% vs ontem</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Cards de Funcionalidades -->
                <div class="feature-cards">
                    <div class="feature-card">
                        <i class="fas fa-bolt"></i>
                        <h3>Venda Rápida</h3>
                        <p>Realize vendas de forma rápida e eficiente com o nosso sistema de checkout otimizado.</p>
                        <button class="btn btn-primary btn-sm" style="margin-top: 15px;" id="quickSaleDashboardBtn">
                            <i class="fas fa-play"></i> Iniciar Venda
                        </button>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-chart-pie"></i>
                        <h3>Análise de Dados</h3>
                        <p>Obtenha insights valiosos sobre o seu negócio com relatórios detalhados e personalizáveis.</p>
                        <button class="btn btn-primary btn-sm" style="margin-top: 15px;" onclick="showPage('relatorios')">
                            <i class="fas fa-chart-bar"></i> Ver Relatórios
                        </button>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-mobile-alt"></i>
                        <h3>App Móvel</h3>
                        <p>Aceda ao Bizz Flow em qualquer lugar com a nossa aplicação móvel disponível para iOS e Android.</p>
                        <button class="btn btn-primary btn-sm" style="margin-top: 15px;" id="downloadAppBtn">
                            <i class="fas fa-download"></i> Baixar App
                        </button>
                    </div>
                </div>

                <!-- Vendas Recentes -->
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-history"></i> Vendas Recentes</h2>
                        <div>
                            <button class="btn btn-outline btn-sm">
                                <i class="fas fa-filter"></i> Filtrar
                            </button>
                            <button class="btn btn-primary btn-sm" id="novaVendaBtn">
                                <i class="fas fa-plus"></i> Nova Venda
                            </button>
                        </div>
                    </div>
                    <div class="table-container">
                        <table id="recentSalesTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Cliente</th>
                                    <th>Data</th>
                                    <th>Total</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="recentSalesBody">
                                <!-- Sales will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-outline" id="loadMoreSalesBtn">
                            <i class="fas fa-sync-alt"></i> Carregar Mais Vendas
                        </button>
                    </div>
                </div>

                <!-- Alertas de Stock -->
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-exclamation-triangle"></i> Alertas de Stock</h2>
                        <button class="btn btn-warning btn-sm" id="reporStockBtn">
                            <i class="fas fa-boxes"></i> Repor Stock
                        </button>
                    </div>
                    <div class="table-container">
                        <table id="stockAlertTable">
                            <thead>
                                <tr>
                                    <th>Produto</th>
                                    <th>Categoria</th>
                                    <th>Stock Atual</th>
                                    <th>Stock Mínimo</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="stockAlertBody">
                                <!-- Stock alerts will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Gráficos de Performance -->
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-chart-line"></i> Performance do Mês</h2>
                        <div>
                            <select id="chartPeriod" class="form-control" style="width: auto; display: inline-block;">
                                <option value="week">Esta Semana</option>
                                <option value="month" selected>Este Mês</option>
                                <option value="quarter">Este Trimestre</option>
                                <option value="year">Este Ano</option>
                            </select>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 25px;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                            <h3 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Vendas Diárias</h3>
                            <canvas id="salesChart" height="250"></canvas>
                        </div>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                            <h3 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Top Categorias</h3>
                            <canvas id="categoryChart" height="250"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Clientes Page -->
            <div id="clientesPage" class="page-content" style="display: none;">
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-users"></i> Gestão de Clientes</h2>
                        <div>
                            <input type="text" id="searchClient" class="form-control" placeholder="Buscar cliente..." style="width: 250px; display: inline-block; margin-right: 10px;">
                            <button class="btn btn-primary" id="novoClienteBtn">
                                <i class="fas fa-plus"></i> Novo Cliente
                            </button>
                        </div>
                    </div>
                    
                    <div class="tabs" style="margin-top: 10px;">
                        <div class="tab active" data-client-tab="all">Todos Clientes</div>
                        <div class="tab" data-client-tab="active">Clientes Ativos</div>
                        <div class="tab" data-client-tab="vip">Clientes VIP</div>
                        <div class="tab" data-client-tab="inactive">Inativos</div>
                    </div>
                    
                    <div class="table-container" style="margin-top: 20px;">
                        <table id="clientesTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nome</th>
                                    <th>Telefone</th>
                                    <th>Email</th>
                                    <th>Tipo</th>
                                    <th>Total Compras</th>
                                    <th>Última Compra</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="clientesBody">
                                <!-- Clients will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 25px;">
                        <div>
                            <span style="color: var(--bizzflow-gray); font-size: 0.9rem;">Mostrando <span id="clientCount">0</span> de <span id="totalClients">0</span> clientes</span>
                        </div>
                        <div>
                            <button class="btn btn-outline btn-sm" onclick="exportData('clientes', 'excel')">
                                <i class="fas fa-file-excel"></i> Excel
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="exportData('clientes', 'pdf')">
                                <i class="fas fa-file-pdf"></i> PDF
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="exportData('clientes', 'csv')">
                                <i class="fas fa-file-csv"></i> CSV
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Estatísticas de Clientes -->
                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
                            <i class="fas fa-user-friends"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalClientesCount">0</h3>
                            <p>Total de Clientes</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #3498db, #2980b9);">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="vipClientesCount">0</h3>
                            <p>Clientes VIP</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #2ecc71, #27ae60);">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="clientesAtivosCount">0</h3>
                            <p>Clientes Ativos</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">
                            <i class="fas fa-user-slash"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="clientesInativosCount">0</h3>
                            <p>Clientes Inativos</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Produtos Page -->
            <div id="produtosPage" class="page-content" style="display: none;">
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-boxes"></i> Gestão de Produtos</h2>
                        <div>
                            <input type="text" id="searchProduct" class="form-control" placeholder="Buscar produto..." style="width: 250px; display: inline-block; margin-right: 10px;">
                            <button class="btn btn-primary" id="novoProdutoBtn">
                                <i class="fas fa-plus"></i> Novo Produto
                            </button>
                            <button class="btn btn-warning btn-sm" id="importarProdutosBtn" style="margin-left: 10px;">
                                <i class="fas fa-file-import"></i> Importar
                            </button>
                        </div>
                    </div>
                    
                    <div class="tabs" style="margin-top: 10px;">
                        <div class="tab active" data-product-tab="all">Todos Produtos</div>
                        <div class="tab" data-product-tab="low">Stock Baixo</div>
                        <div class="tab" data-product-tab="out">Esgotados</div>
                        <div class="tab" data-product-tab="categories">Categorias</div>
                    </div>
                    
                    <div class="table-container" style="margin-top: 20px;">
                        <table id="produtosTable">
                            <thead>
                                <tr>
                                    <th>Código</th>
                                    <th>Produto</th>
                                    <th>Categoria</th>
                                    <th>Preço (MZN)</th>
                                    <th>Custo</th>
                                    <th>Stock</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="produtosBody">
                                <!-- Products will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 25px;">
                        <div>
                            <span style="color: var(--bizzflow-gray); font-size: 0.9rem;">Mostrando <span id="productCount">0</span> produtos</span>
                        </div>
                        <div>
                            <button class="btn btn-outline btn-sm" onclick="exportData('produtos', 'excel')">
                                <i class="fas fa-file-excel"></i> Excel
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="exportData('produtos', 'pdf')">
                                <i class="fas fa-file-pdf"></i> PDF
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="exportData('produtos', 'csv')">
                                <i class="fas fa-file-csv"></i> CSV
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Estatísticas de Produtos -->
                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #1abc9c, #16a085);">
                            <i class="fas fa-box-open"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalProdutosCount">0</h3>
                            <p>Total de Produtos</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #e67e22, #d35400);">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="produtosStockBaixo">0</h3>
                            <p>Produtos com Stock Baixo</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">
                            <i class="fas fa-times-circle"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="produtosEsgotados">0</h3>
                            <p>Produtos Esgotados</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
                            <i class="fas fa-tags"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalCategorias">0</h3>
                            <p>Categorias</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vendas Page -->
            <div id="vendasPage" class="page-content" style="display: none;">
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-shopping-cart"></i> Gestão de Vendas</h2>
                        <div>
                            <input type="text" id="searchSale" class="form-control" placeholder="Buscar venda..." style="width: 250px; display: inline-block; margin-right: 10px;">
                            <button class="btn btn-primary" id="novaVendaModalBtn">
                                <i class="fas fa-plus"></i> Nova Venda
                            </button>
                        </div>
                    </div>
                    
                    <div class="tabs" style="margin-top: 10px;">
                        <div class="tab active" data-sale-tab="today">Hoje</div>
                        <div class="tab" data-sale-tab="week">Esta Semana</div>
                        <div class="tab" data-sale-tab="month">Este Mês</div>
                        <div class="tab" data-sale-tab="all">Todas</div>
                    </div>
                    
                    <div class="table-container" style="margin-top: 20px;">
                        <table id="vendasTable">
                            <thead>
                                <tr>
                                    <th>Recibo Nº</th>
                                    <th>Cliente</th>
                                    <th>Data/Hora</th>
                                    <th>Itens</th>
                                    <th>Total (MZN)</th>
                                    <th>Forma Pag.</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="vendasBody">
                                <!-- Sales will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 25px;">
                        <div>
                            <span style="color: var(--bizzflow-gray); font-size: 0.9rem;">Mostrando <span id="saleCount">0</span> vendas</span>
                        </div>
                        <div>
                            <button class="btn btn-outline btn-sm" onclick="exportData('vendas', 'excel')">
                                <i class="fas fa-file-excel"></i> Excel
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="exportData('vendas', 'pdf')">
                                <i class="fas fa-file-pdf"></i> PDF
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="exportData('vendas', 'csv')">
                                <i class="fas fa-file-csv"></i> CSV
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Estatísticas de Vendas -->
                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #3498db, #2980b9);">
                            <i class="fas fa-calendar-day"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="vendasHojeCount">0</h3>
                            <p>Vendas Hoje</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #2ecc71, #27ae60);">
                            <i class="fas fa-calendar-week"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="vendasSemanaCount">0</h3>
                            <p>Vendas Esta Semana</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #e67e22, #d35400);">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="vendasMesCount">0</h3>
                            <p>Vendas Este Mês</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
                            <i class="fas fa-money-bill-alt"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="faturamentoMes">0 MZN</h3>
                            <p>Faturamento do Mês</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Financeiro Page -->
            <div id="financeiroPage" class="page-content" style="display: none;">
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-money-bill-wave"></i> Gestão Financeira</h2>
                        <div>
                            <button class="btn btn-success btn-sm" id="novoRecebimentoBtn">
                                <i class="fas fa-plus"></i> Novo Recebimento
                            </button>
                            <button class="btn btn-danger btn-sm" style="margin-left: 10px;" id="novoPagamentoBtn">
                                <i class="fas fa-minus"></i> Novo Pagamento
                            </button>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 25px; margin-top: 20px;">
                        <div>
                            <h3 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Fluxo de Caixa</h3>
                            <canvas id="cashflowChart" height="300"></canvas>
                        </div>
                        <div>
                            <h3 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Saldo Atual</h3>
                            <div style="background: linear-gradient(135deg, var(--bizzflow-primary), var(--bizzflow-secondary)); color: white; padding: 25px; border-radius: 15px; text-align: center;">
                                <div style="font-size: 1.2rem; margin-bottom: 10px;">Saldo Disponível</div>
                                <div style="font-size: 2.5rem; font-weight: 700;" id="currentBalance">0 MZN</div>
                                <div style="font-size: 0.9rem; margin-top: 15px; opacity: 0.9;">Atualizado em tempo real</div>
                            </div>
                            
                            <div style="margin-top: 25px;">
                                <h4 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Resumo Financeiro</h4>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                    <span>Receitas do Mês:</span>
                                    <span style="font-weight: 600; color: #27ae60;" id="monthlyIncome">0 MZN</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                    <span>Despesas do Mês:</span>
                                    <span style="font-weight: 600; color: #e74c3c;" id="monthlyExpenses">0 MZN</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px; padding-top: 10px; border-top: 1px solid #eee;">
                                    <span>Lucro Líquido:</span>
                                    <span style="font-weight: 700; color: var(--bizzflow-primary);" id="monthlyProfit">0 MZN</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Relatórios Page -->
            <div id="relatoriosPage" class="page-content" style="display: none;">
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-chart-bar"></i> Relatórios e Analytics</h2>
                        <div>
                            <select id="reportPeriod" class="form-control" style="width: auto; display: inline-block; margin-right: 10px;">
                                <option value="today">Hoje</option>
                                <option value="week">Esta Semana</option>
                                <option value="month" selected>Este Mês</option>
                                <option value="quarter">Este Trimestre</option>
                                <option value="year">Este Ano</option>
                            </select>
                            <div class="export-buttons" style="display: inline-block;">
                                <button class="btn btn-outline btn-sm" onclick="exportReportData('excel')">
                                    <i class="fas fa-file-excel"></i> Excel
                                </button>
                                <button class="btn btn-outline btn-sm" onclick="exportReportData('pdf')">
                                    <i class="fas fa-file-pdf"></i> PDF
                                </button>
                                <button class="btn btn-outline btn-sm" onclick="exportReportData('csv')">
                                    <i class="fas fa-file-csv"></i> CSV
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tabs" style="margin-top: 15px;">
                        <div class="tab active" data-report-tab="sales">Vendas</div>
                        <div class="tab" data-report-tab="products">Produtos</div>
                        <div class="tab" data-report-tab="clients">Clientes</div>
                        <div class="tab" data-report-tab="financial">Financeiro</div>
                        <div class="tab" data-report-tab="subscriptions">Assinaturas</div>
                        <div class="tab" data-report-tab="custom">Personalizado</div>
                    </div>
                    
                    <div id="salesReportTab" class="tab-content active" style="margin-top: 25px;">
                        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 25px; margin-bottom: 30px;">
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                <h3 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Vendas por Dia</h3>
                                <canvas id="reportSalesChart" height="250"></canvas>
                            </div>
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                <h3 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Top Produtos</h3>
                                <canvas id="reportProductsChart" height="250"></canvas>
                            </div>
                        </div>
                        
                        <div class="stats-cards">
                            <div class="stat-card">
                                <div class="stat-info">
                                    <h3 id="reportTotalSales">0 MZN</h3>
                                    <p>Total de Vendas</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-info">
                                    <h3 id="reportTotalItems">0</h3>
                                    <p>Itens Vendidos</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-info">
                                    <h3 id="reportAvgSale">0 MZN</h3>
                                    <p>Venda Média</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-info">
                                    <h3 id="reportTopProduct">-</h3>
                                    <p>Produto Mais Vendido</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="productsReportTab" class="tab-content" style="margin-top: 25px;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                            <h3 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Produtos Mais Vendidos</h3>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Produto</th>
                                            <th>Categoria</th>
                                            <th>Quantidade Vendida</th>
                                            <th>Receita Total</th>
                                            <th>Margem de Lucro</th>
                                        </tr>
                                    </thead>
                                    <tbody id="topProductsBody">
                                        <!-- Top products will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="clientsReportTab" class="tab-content" style="margin-top: 25px;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                            <h3 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Top Clientes</h3>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Cliente</th>
                                            <th>Tipo</th>
                                            <th>Total Compras</th>
                                            <th>Última Compra</th>
                                            <th>Ticket Médio</th>
                                        </tr>
                                    </thead>
                                    <tbody id="topClientsBody">
                                        <!-- Top clients will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="financialReportTab" class="tab-content" style="margin-top: 25px;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                            <h3 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Relatório Financeiro</h3>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Mês</th>
                                            <th>Receitas</th>
                                            <th>Despesas</th>
                                            <th>Lucro</th>
                                            <th>Margem</th>
                                            <th>Crescimento</th>
                                        </tr>
                                    </thead>
                                    <tbody id="financialReportBody">
                                        <!-- Financial data will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="subscriptionsReportTab" class="tab-content" style="margin-top: 25px;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                            <h3 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Relatório de Assinaturas</h3>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Plano</th>
                                            <th>Assinaturas Ativas</th>
                                            <th>Receita Mensal</th>
                                            <th>Taxa de Retenção</th>
                                            <th>Churn Rate</th>
                                        </tr>
                                    </thead>
                                    <tbody id="subscriptionsReportBody">
                                        <!-- Subscriptions data will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="customReportTab" class="tab-content" style="margin-top: 25px;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                            <h3 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Relatório Personalizado</h3>
                            <div class="form-group">
                                <label for="reportType">Tipo de Relatório</label>
                                <select id="reportType" class="form-control">
                                    <option value="sales">Vendas</option>
                                    <option value="products">Produtos</option>
                                    <option value="clients">Clientes</option>
                                    <option value="financial">Financeiro</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="dateRange">Período</label>
                                <select id="dateRange" class="form-control">
                                    <option value="today">Hoje</option>
                                    <option value="week">Esta Semana</option>
                                    <option value="month">Este Mês</option>
                                    <option value="quarter">Este Trimestre</option>
                                    <option value="year">Este Ano</option>
                                    <option value="custom">Personalizado</option>
                                </select>
                            </div>
                            <div id="customDateRange" style="display: none;">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    <div class="form-group">
                                        <label for="startDate">Data Inicial</label>
                                        <input type="date" id="startDate" class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label for="endDate">Data Final</label>
                                        <input type="date" id="endDate" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="generateCustomReport()">
                                <i class="fas fa-chart-bar"></i> Gerar Relatório
                            </button>
                            <div id="customReportResults" style="margin-top: 20px;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Investimentos Page (para Investidores) -->
            <div id="investimentosPage" class="page-content" style="display: none;">
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-chart-line"></i> Dashboard do Investidor</h2>
                        <div>
                            <select id="investmentPeriod" class="form-control" style="width: auto; display: inline-block;">
                                <option value="month">Último Mês</option>
                                <option value="quarter" selected>Último Trimestre</option>
                                <option value="year">Último Ano</option>
                                <option value="all">Todo Período</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i>
                        <div>
                            <strong>Informação para Investidores:</strong> Esta secção apresenta métricas financeiras detalhadas, ROI, e projeções de crescimento do negócio.
                        </div>
                    </div>
                    
                    <div class="stats-cards">
                        <div class="stat-card" style="border-top-color: #9b59b6;">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
                                <i class="fas fa-percentage"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="roiPercentage">0%</h3>
                                <p>ROI (Retorno sobre Investimento)</p>
                                <div class="stat-trend trend-up">
                                    <i class="fas fa-arrow-up"></i>
                                    <span>5.2% vs período anterior</span>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card" style="border-top-color: #3498db;">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #3498db, #2980b9);">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="growthRate">0%</h3>
                                <p>Taxa de Crescimento</p>
                                <div class="stat-trend trend-up">
                                    <i class="fas fa-arrow-up"></i>
                                    <span>12.5% vs período anterior</span>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card" style="border-top-color: #2ecc71;">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #2ecc71, #27ae60);">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalInvestment">0 MZN</h3>
                                <p>Total Investido</p>
                            </div>
                        </div>
                        <div class="stat-card" style="border-top-color: #e74c3c;">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">
                                <i class="fas fa-balance-scale"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="profitMargin">0%</h3>
                                <p>Margem de Lucro</p>
                                <div class="stat-trend trend-up">
                                    <i class="fas fa-arrow-up"></i>
                                    <span>2.3% vs período anterior</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 25px; margin-top: 30px;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                            <h3 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Performance do Investimento</h3>
                            <canvas id="investmentChart" height="300"></canvas>
                        </div>
                        <div>
                            <h3 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Próximos Passos</h3>
                            <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 20px;">
                                <h4 style="color: var(--bizzflow-primary); margin-bottom: 10px;">Recomendações</h4>
                                <ul style="padding-left: 20px;">
                                    <li style="margin-bottom: 8px;">Aumentar investimento em marketing digital</li>
                                    <li style="margin-bottom: 8px;">Expandir para nova localização</li>
                                    <li style="margin-bottom: 8px;">Diversificar linha de produtos</li>
                                </ul>
                            </div>
                            
                            <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                                <h4 style="color: var(--bizzflow-primary); margin-bottom: 10px;">Relatórios Disponíveis</h4>
                                <button class="btn btn-outline btn-sm" style="width: 100%; margin-bottom: 10px;" onclick="downloadReport('financial')">
                                    <i class="fas fa-file-pdf"></i> Relatório Financeiro Detalhado
                                </button>
                                <button class="btn btn-outline btn-sm" style="width: 100%; margin-bottom: 10px;" onclick="downloadReport('growth')">
                                    <i class="fas fa-file-excel"></i> Projeções de Crescimento
                                </button>
                                <button class="btn btn-outline btn-sm" style="width: 100%;" onclick="downloadReport('market')">
                                    <i class="fas fa-file-alt"></i> Análise de Mercado
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Planos Page -->
            <div id="planosPage" class="page-content" style="display: none;">
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-crown"></i> Gestão de Planos</h2>
                        <button class="btn btn-primary" id="novoPlanoBtn">
                            <i class="fas fa-plus"></i> Novo Plano
                        </button>
                    </div>
                    
                    <div class="plans-grid" id="plansGrid">
                        <!-- Planos serão carregados aqui -->
                    </div>
                </div>
                
                <!-- Configurações de Período de Teste -->
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-clock"></i> Configurações de Período de Teste</h2>
                    </div>
                    
                    <form id="trialSettingsForm">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-top: 20px;">
                            <div>
                                <div class="form-group">
                                    <label for="trialDays">Dias de Teste Gratuito</label>
                                    <input type="number" id="trialDays" class="form-control" min="0" max="365" value="7">
                                    <small style="color: var(--bizzflow-gray); font-size: 0.85rem;">Número de dias para o período de teste gratuito</small>
                                </div>
                                
                                <div class="form-group">
                                    <label for="trialFeatures">Funcionalidades Incluídas no Teste</label>
                                    <select id="trialFeatures" class="form-control" multiple style="height: 150px;">
                                        <option value="dashboard" selected>Dashboard</option>
                                        <option value="clientes" selected>Gestão de Clientes</option>
                                        <option value="produtos" selected>Gestão de Produtos</option>
                                        <option value="vendas" selected>Gestão de Vendas</option>
                                        <option value="relatorios" selected>Relatórios Básicos</option>
                                        <option value="exportar">Exportação de Dados</option>
                                        <option value="importar">Importação de Dados</option>
                                        <option value="suporte">Suporte por Email</option>
                                    </select>
                                    <small style="color: var(--bizzflow-gray); font-size: 0.85rem;">Mantenha CTRL para selecionar múltiplas opções</small>
                                </div>
                            </div>
                            
                            <div>
                                <div class="form-group">
                                    <label for="trialLimits">Limites do Período de Teste</label>
                                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 10px;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                            <span>Máximo de Clientes:</span>
                                            <input type="number" id="trialMaxClients" class="form-control" style="width: 100px; display: inline-block;" min="1" max="1000" value="50">
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                            <span>Máximo de Produtos:</span>
                                            <input type="number" id="trialMaxProducts" class="form-control" style="width: 100px; display: inline-block;" min="1" max="10000" value="100">
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                            <span>Máximo de Vendas/Mês:</span>
                                            <input type="number" id="trialMaxSales" class="form-control" style="width: 100px; display: inline-block;" min="1" max="10000" value="100">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="trialAutoCancel" checked> Cancelar automaticamente após o período de teste
                                    </label>
                                </div>
                                
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="trialNotifications" checked> Enviar notificações antes do fim do teste
                                    </label>
                                </div>
                                
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="trialCardRequired"> Exigir cartão de crédito para teste gratuito
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Guardar Configurações de Teste
                        </button>
                    </form>
                </div>
            </div>

            <!-- Assinaturas Page -->
            <div id="assinaturasPage" class="page-content" style="display: none;">
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-file-contract"></i> Gestão de Assinaturas</h2>
                        <button class="btn btn-primary" id="novaAssinaturaBtn">
                            <i class="fas fa-plus"></i> Nova Assinatura
                        </button>
                    </div>
                    
                    <div class="tabs" style="margin-top: 10px;">
                        <div class="tab active" data-subscription-tab="active">Ativas</div>
                        <div class="tab" data-subscription-tab="trial">Em Teste</div>
                        <div class="tab" data-subscription-tab="pending">Pendentes</div>
                        <div class="tab" data-subscription-tab="expired">Expiradas</div>
                        <div class="tab" data-subscription-tab="cancelled">Canceladas</div>
                    </div>
                    
                    <div class="table-container" style="margin-top: 20px;">
                        <table id="assinaturasTable">
                            <thead>
                                <tr>
                                    <th>Cliente</th>
                                    <th>Plano</th>
                                    <th>Início</th>
                                    <th>Fim</th>
                                    <th>Próximo Pagamento</th>
                                    <th>Valor (MZN)</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="assinaturasBody">
                                <!-- Assinaturas serão carregadas aqui -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 25px;">
                        <div>
                            <span style="color: var(--bizzflow-gray); font-size: 0.9rem;">Mostrando <span id="subscriptionCount">0</span> assinaturas</span>
                        </div>
                        <div>
                            <button class="btn btn-outline btn-sm" onclick="exportData('assinaturas', 'excel')">
                                <i class="fas fa-file-excel"></i> Excel
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="exportData('assinaturas', 'pdf')">
                                <i class="fas fa-file-pdf"></i> PDF
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="exportData('assinaturas', 'csv')">
                                <i class="fas fa-file-csv"></i> CSV
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Estatísticas de Assinaturas -->
                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #3498db, #2980b9);">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalAssinaturas">0</h3>
                            <p>Total de Assinaturas</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #2ecc71, #27ae60);">
                            <i class="fas fa-play-circle"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="assinaturasAtivas">0</h3>
                            <p>Assinaturas Ativas</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f39c12, #e67e22);">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="assinaturasTrial">0</h3>
                            <p>Em Período de Teste</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="receitaMensal">0 MZN</h3>
                            <p>Receita Mensal Recorrente</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Importar/Exportar Page -->
            <div id="exportarPage" class="page-content" style="display: none;">
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-file-export"></i> Importar e Exportar Dados</h2>
                    </div>
                    
                    <div class="tabs" style="margin-top: 10px;">
                        <div class="tab active" data-import-export-tab="export">Exportar</div>
                        <div class="tab" data-import-export-tab="import">Importar</div>
                        <div class="tab" data-import-export-tab="templates">Templates</div>
                    </div>
                    
                    <!-- Exportar -->
                    <div id="exportTab" class="tab-content active" style="margin-top: 25px;">
                        <h3 style="margin-bottom: 20px; color: var(--bizzflow-primary);">
                            <i class="fas fa-download"></i> Exportar Dados do Sistema
                        </h3>
                        
                        <div class="import-export-box" onclick="showExportOptions()">
                            <i class="fas fa-cloud-download-alt" style="font-size: 3rem; color: var(--bizzflow-primary); margin-bottom: 15px;"></i>
                            <h4 style="margin-bottom: 10px;">Clique para Exportar Dados</h4>
                            <p style="color: var(--bizzflow-gray);">Exporte todos os seus dados em múltiplos formatos</p>
                        </div>
                        
                        <div id="exportOptions" style="display: none; margin-top: 20px;">
                            <h4 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Selecione o que deseja exportar:</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; cursor: pointer;" onclick="exportData('all', 'excel')">
                                    <h5><i class="fas fa-file-excel" style="color: #217346;"></i> Tudo em Excel</h5>
                                    <p style="font-size: 0.9rem; color: var(--bizzflow-gray);">Todos os dados em uma pasta Excel</p>
                                </div>
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; cursor: pointer;" onclick="exportData('all', 'pdf')">
                                    <h5><i class="fas fa-file-pdf" style="color: #e74c3c;"></i> Relatório Completo PDF</h5>
                                    <p style="font-size: 0.9rem; color: var(--bizzflow-gray);">Relatório detalhado em PDF</p>
                                </div>
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; cursor: pointer;" onclick="exportData('all', 'csv')">
                                    <h5><i class="fas fa-file-csv" style="color: #3498db;"></i> Backup Completo CSV</h5>
                                    <p style="font-size: 0.9rem; color: var(--bizzflow-gray);">Todos os dados em formato CSV</p>
                                </div>
                            </div>
                            
                            <h4 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Ou exporte por categoria:</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">
                                <button class="btn btn-outline btn-sm" onclick="exportData('clientes', 'excel')">
                                    <i class="fas fa-users"></i> Clientes (Excel)
                                </button>
                                <button class="btn btn-outline btn-sm" onclick="exportData('produtos', 'excel')">
                                    <i class="fas fa-box"></i> Produtos (Excel)
                                </button>
                                <button class="btn btn-outline btn-sm" onclick="exportData('vendas', 'excel')">
                                    <i class="fas fa-shopping-cart"></i> Vendas (Excel)
                                </button>
                                <button class="btn btn-outline btn-sm" onclick="exportData('fornecedores', 'excel')">
                                    <i class="fas fa-truck"></i> Fornecedores (Excel)
                                </button>
                                <button class="btn btn-outline btn-sm" onclick="exportData('assinaturas', 'excel')">
                                    <i class="fas fa-file-contract"></i> Assinaturas (Excel)
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Importar -->
                    <div id="importTab" class="tab-content" style="margin-top: 25px;">
                        <h3 style="margin-bottom: 20px; color: var(--bizzflow-primary);">
                            <i class="fas fa-upload"></i> Importar Dados para o Sistema
                        </h3>
                        
                        <div class="file-upload-area" id="fileUploadArea">
                            <i class="fas fa-cloud-upload-alt" style="font-size: 3rem; color: var(--bizzflow-secondary); margin-bottom: 15px;"></i>
                            <h4 style="margin-bottom: 10px;">Arraste e solte arquivos aqui</h4>
                            <p style="color: var(--bizzflow-gray); margin-bottom: 15px;">ou clique para selecionar arquivos</p>
                            <input type="file" id="fileInput" accept=".csv,.xlsx,.xls" multiple style="display: none;">
                            <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">
                                <i class="fas fa-folder-open"></i> Selecionar Arquivos
                            </button>
                            <p style="color: var(--bizzflow-gray); font-size: 0.9rem; margin-top: 15px;">
                                Formatos suportados: CSV, Excel (.xlsx, .xls)
                            </p>
                        </div>
                        
                        <div id="importOptions" style="margin-top: 20px;">
                            <h4 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Selecione o tipo de importação:</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
                                    <h5><i class="fas fa-users" style="color: #3498db;"></i> Importar Clientes</h5>
                                    <p style="font-size: 0.9rem; color: var(--bizzflow-gray); margin-bottom: 10px;">Importe lista de clientes em massa</p>
                                    <button class="btn btn-outline btn-sm" onclick="showImportTemplate('clientes')">
                                        <i class="fas fa-download"></i> Template
                                    </button>
                                </div>
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
                                    <h5><i class="fas fa-box" style="color: #2ecc71;"></i> Importar Produtos</h5>
                                    <p style="font-size: 0.9rem; color: var(--bizzflow-gray); margin-bottom: 10px;">Importe catálogo de produtos</p>
                                    <button class="btn btn-outline btn-sm" onclick="showImportTemplate('produtos')">
                                        <i class="fas fa-download"></i> Template
                                    </button>
                                </div>
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
                                    <h5><i class="fas fa-shopping-cart" style="color: #9b59b6;"></i> Importar Vendas</h5>
                                    <p style="font-size: 0.9rem; color: var(--bizzflow-gray); margin-bottom: 10px;">Importe histórico de vendas</p>
                                    <button class="btn btn-outline btn-sm" onclick="showImportTemplate('vendas')">
                                        <i class="fas fa-download"></i> Template
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Templates -->
                    <div id="templatesTab" class="tab-content" style="margin-top: 25px;">
                        <h3 style="margin-bottom: 20px; color: var(--bizzflow-primary);">
                            <i class="fas fa-file-alt"></i> Templates de Importação
                        </h3>
                        
                        <p style="margin-bottom: 20px; color: var(--bizzflow-gray);">
                            Baixe os templates para preparar os seus dados antes da importação.
                        </p>
                        
                        <div class="template-download">
                            <div class="template-info">
                                <h4>Template para Clientes</h4>
                                <p>Formato CSV com colunas: Nome, Telefone, Email, Endereço, NIF</p>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="downloadTemplate('clientes')">
                                <i class="fas fa-download"></i> Baixar Template
                            </button>
                        </div>
                        
                        <div class="template-download">
                            <div class="template-info">
                                <h4>Template para Produtos</h4>
                                <p>Formato CSV com colunas: Código, Nome, Categoria, Preço, Custo, Stock</p>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="downloadTemplate('produtos')">
                                <i class="fas fa-download"></i> Baixar Template
                            </button>
                        </div>
                        
                        <div class="template-download">
                            <div class="template-info">
                                <h4>Template para Vendas</h4>
                                <p>Formato CSV com colunas: Data, Cliente, Produtos, Total, Forma Pagamento</p>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="downloadTemplate('vendas')">
                                <i class="fas fa-download"></i> Baixar Template
                            </button>
                        </div>
                        
                        <div class="template-download">
                            <div class="template-info">
                                <h4>Template para Fornecedores</h4>
                                <p>Formato CSV com colunas: Nome, Contacto, Email, Produtos Fornecidos</p>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="downloadTemplate('fornecedores')">
                                <i class="fas fa-download"></i> Baixar Template
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stock Page -->
            <div id="stockPage" class="page-content" style="display: none;">
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-warehouse"></i> Gestão de Stock</h2>
                        <div>
                            <button class="btn btn-primary btn-sm" id="novaEntradaBtn">
                                <i class="fas fa-plus"></i> Nova Entrada
                            </button>
                            <button class="btn btn-warning btn-sm" style="margin-left: 10px;" id="novaSaidaBtn">
                                <i class="fas fa-minus"></i> Nova Saída
                            </button>
                            <button class="btn btn-success btn-sm" style="margin-left: 10px;" id="inventarioBtn">
                                <i class="fas fa-sync-alt"></i> Inventário
                            </button>
                            <div class="export-buttons" style="display: inline-block; margin-left: 10px;">
                                <button class="btn btn-outline btn-sm" onclick="exportStockData('excel')">
                                    <i class="fas fa-file-excel"></i> Excel
                                </button>
                                <button class="btn btn-outline btn-sm" onclick="exportStockData('pdf')">
                                    <i class="fas fa-file-pdf"></i> PDF
                                </button>
                                <button class="btn btn-outline btn-sm" onclick="exportStockData('csv')">
                                    <i class="fas fa-file-csv"></i> CSV
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-top: 20px;">
                        <div>
                            <h3 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Movimentações Recentes</h3>
                            <div class="table-container">
                                <table style="min-width: auto;">
                                    <thead>
                                        <tr>
                                            <th>Data</th>
                                            <th>Produto</th>
                                            <th>Tipo</th>
                                            <th>Quantidade</th>
                                            <th>Responsável</th>
                                        </tr>
                                    </thead>
                                    <tbody id="stockMovementsBody">
                                        <!-- Stock movements will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div>
                            <h3 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Avisos de Stock</h3>
                            <div id="stockWarningsList">
                                <!-- Stock warnings will be loaded here -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Relatório de Stock -->
                    <div style="margin-top: 30px;">
                        <h3 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Relatório de Stock</h3>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Código</th>
                                        <th>Produto</th>
                                        <th>Categoria</th>
                                        <th>Stock Atual</th>
                                        <th>Stock Mínimo</th>
                                        <th>Stock Máximo</th>
                                        <th>Valor em Stock</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="stockReportBody">
                                    <!-- Stock report will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Fornecedores Page -->
            <div id="fornecedoresPage" class="page-content" style="display: none;">
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-truck"></i> Gestão de Fornecedores</h2>
                        <button class="btn btn-primary" id="novoFornecedorBtn">
                            <i class="fas fa-plus"></i> Novo Fornecedor
                        </button>
                    </div>
                    
                    <div class="table-container" style="margin-top: 20px;">
                        <table id="fornecedoresTable">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Contacto</th>
                                    <th>Produtos Fornecidos</th>
                                    <th>Última Entrega</th>
                                    <th>Avaliação</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="fornecedoresBody">
                                <!-- Suppliers will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Encomendas Page -->
            <div id="encomendasPage" class="page-content" style="display: none;">
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-clipboard-list"></i> Gestão de Encomendas</h2>
                        <button class="btn btn-primary" id="novaEncomendaBtn">
                            <i class="fas fa-plus"></i> Nova Encomenda
                        </button>
                    </div>
                    
                    <div class="tabs" style="margin-top: 10px;">
                        <div class="tab active" data-order-tab="pending">Pendentes</div>
                        <div class="tab" data-order-tab="processing">Em Processo</div>
                        <div class="tab" data-order-tab="completed">Concluídas</div>
                        <div class="tab" data-order-tab="cancelled">Canceladas</div>
                    </div>
                    
                    <div class="table-container" style="margin-top: 20px;">
                        <table id="encomendasTable">
                            <thead>
                                <tr>
                                    <th>Nº Encomenda</th>
                                    <th>Cliente</th>
                                    <th>Data</th>
                                    <th>Valor</th>
                                    <th>Status</th>
                                    <th>Previsão Entrega</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="encomendasBody">
                                <!-- Orders will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Equipa Page -->
            <div id="equipaPage" class="page-content" style="display: none;">
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-user-tie"></i> Gestão da Equipa</h2>
                        <button class="btn btn-primary" id="novoMembroBtn">
                            <i class="fas fa-plus"></i> Novo Membro
                        </button>
                    </div>
                    
                    <div class="stats-cards" style="margin-bottom: 30px;">
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #3498db, #2980b9);">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalMembros">0</h3>
                                <p>Total de Membros</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #2ecc71, #27ae60);">
                                <i class="fas fa-user-check"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="membrosAtivos">0</h3>
                                <p>Membros Ativos</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #f39c12, #e67e22);">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="vendasEquipa">0</h3>
                                <p>Vendas da Equipa</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="topVendedor">-</h3>
                                <p>Top Vendedor</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table id="equipaTable">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Cargo</th>
                                    <th>Contacto</th>
                                    <th>Data Admissão</th>
                                    <th>Vendas</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="equipaBody">
                                <!-- Team members will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Configurações Page -->
            <div id="configuracoesPage" class="page-content" style="display: none;">
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-cog"></i> Configurações do Sistema</h2>
                    </div>
                    
                    <div class="tabs" style="margin-top: 10px;">
                        <div class="tab active" data-settings-tab="business">Empresa</div>
                        <div class="tab" data-settings-tab="system">Sistema</div>
                        <div class="tab" data-settings-tab="users">Utilizadores</div>
                        <div class="tab" data-settings-tab="subscriptions">Assinaturas</div>
                        <div class="tab" data-settings-tab="integrations">Integrações</div>
                        <div class="tab" data-settings-tab="backup">Backup</div>
                    </div>
                    
                    <div id="businessSettingsTab" class="tab-content active" style="margin-top: 25px;">
                        <form id="businessSettingsForm">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px;">
                                <div>
                                    <h3 style="margin-bottom: 20px; color: var(--bizzflow-primary);">
                                        <i class="fas fa-building"></i> Informação da Empresa
                                    </h3>
                                    <div class="form-group">
                                        <label for="companyName">Nome da Empresa</label>
                                        <input type="text" id="companyName" class="form-control" value="Bizz Flow Lda">
                                    </div>
                                    <div class="form-group">
                                        <label for="companyNIF">NIF</label>
                                        <input type="text" id="companyNIF" class="form-control" value="123456789">
                                    </div>
                                    <div class="form-group">
                                        <label for="companyAddress">Endereço</label>
                                        <input type="text" id="companyAddress" class="form-control" value="Av. 25 de Setembro, Maputo">
                                    </div>
                                    <div class="form-group">
                                        <label for="companyPhone">Telefone</label>
                                        <input type="text" id="companyPhone" class="form-control" value="+258 84 123 4567">
                                    </div>
                                    <div class="form-group">
                                        <label for="companyEmail">Email</label>
                                        <input type="email" id="companyEmail" class="form-control" value="info@bizzflow.co.mz">
                                    </div>
                                </div>
                                
                                <div>
                                    <h3 style="margin-bottom: 20px; color: var(--bizzflow-primary);">
                                        <i class="fas fa-receipt"></i> Configurações de Faturação
                                    </h3>
                                    <div class="form-group">
                                        <label for="invoicePrefix">Prefixo da Fatura</label>
                                        <input type="text" id="invoicePrefix" class="form-control" value="FAT">
                                    </div>
                                    <div class="form-group">
                                        <label for="invoiceStartNumber">Número Inicial</label>
                                        <input type="number" id="invoiceStartNumber" class="form-control" value="1001">
                                    </div>
                                    <div class="form-group">
                                        <label for="invoiceFooter">Rodapé da Fatura</label>
                                        <textarea id="invoiceFooter" class="form-control" rows="3">Obrigado pela sua preferência!</textarea>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" id="autoPrintInvoice" checked> Imprimir fatura automaticamente
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Guardar Configurações
                            </button>
                        </form>
                    </div>
                    
                    <div id="subscriptionsSettingsTab" class="tab-content" style="margin-top: 25px;">
                        <h3 style="margin-bottom: 20px; color: var(--bizzflow-primary);">
                            <i class="fas fa-crown"></i> Configurações de Assinaturas
                        </h3>
                        
                        <form id="subscriptionSettingsForm">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px;">
                                <div>
                                    <div class="form-group">
                                        <label for="subscriptionCurrency">Moeda para Assinaturas</label>
                                        <select id="subscriptionCurrency" class="form-control">
                                            <option value="MZN" selected>Metical (MZN)</option>
                                            <option value="USD">Dólar Americano (USD)</option>
                                            <option value="EUR">Euro (EUR)</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="trialPeriodDays">Período de Teste Gratuito (dias)</label>
                                        <input type="number" id="trialPeriodDays" class="form-control" value="7" min="0" max="365">
                                        <small style="color: var(--bizzflow-gray); font-size: 0.85rem;">Defina 0 para desativar teste gratuito</small>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="gracePeriodDays">Período de Carência (dias)</label>
                                        <input type="number" id="gracePeriodDays" class="form-control" value="3" min="0" max="30">
                                        <small style="color: var(--bizzflow-gray); font-size: 0.85rem;">Dias após expiração antes do cancelamento</small>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="autoRenewal">Renovação Automática</label>
                                        <select id="autoRenewal" class="form-control">
                                            <option value="enabled" selected>Ativada</option>
                                            <option value="disabled">Desativada</option>
                                            <option value="opt-in">Opt-in (Cliente escolhe)</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div>
                                    <div class="form-group">
                                        <label for="paymentMethods">Métodos de Pagamento Disponíveis</label>
                                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                                            <label style="display: block; margin-bottom: 8px;">
                                                <input type="checkbox" id="paymentMulticaixa" checked> Multicaixa
                                            </label>
                                            <label style="display: block; margin-bottom: 8px;">
                                                <input type="checkbox" id="paymentMPesa" checked> M-Pesa
                                            </label>
                                            <label style="display: block; margin-bottom: 8px;">
                                                <input type="checkbox" id="paymentEMola" checked> E-Mola
                                            </label>
                                            <label style="display: block; margin-bottom: 8px;">
                                                <input type="checkbox" id="paymentTransfer" checked> Transferência Bancária
                                            </label>
                                            <label style="display: block; margin-bottom: 8px;">
                                                <input type="checkbox" id="paymentCard"> Cartão de Crédito
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="invoiceDaysBefore">Fatura Antecipada (dias)</label>
                                        <input type="number" id="invoiceDaysBefore" class="form-control" value="7" min="1" max="30">
                                        <small style="color: var(--bizzflow-gray); font-size: 0.85rem;">Dias antes da renovação para enviar fatura</small>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="reminderDays">Lembretes (dias antes)</label>
                                        <input type="text" id="reminderDays" class="form-control" value="7,3,1">
                                        <small style="color: var(--bizzflow-gray); font-size: 0.85rem;">Dias separados por vírgula (ex: 7,3,1)</small>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee;">
                                <h4 style="margin-bottom: 15px; color: var(--bizzflow-primary);">Notificações de Assinatura</h4>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    <div>
                                        <label style="display: block; margin-bottom: 10px;">
                                            <input type="checkbox" id="notifyTrialEnd" checked> Notificar fim do período de teste
                                        </label>
                                        <label style="display: block; margin-bottom: 10px;">
                                            <input type="checkbox" id="notifyBeforeRenewal" checked> Notificar antes da renovação
                                        </label>
                                        <label style="display: block; margin-bottom: 10px;">
                                            <input type="checkbox" id="notifyPaymentFailed" checked> Notificar pagamento falhado
                                        </label>
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 10px;">
                                            <input type="checkbox" id="notifySubscriptionEnd" checked> Notificar fim da assinatura
                                        </label>
                                        <label style="display: block; margin-bottom: 10px;">
                                            <input type="checkbox" id="notifyAutoRenewal" checked> Notificar renovação automática
                                        </label>
                                        <label style="display: block; margin-bottom: 10px;">
                                            <input type="checkbox" id="sendWelcomeEmail" checked> Enviar email de boas-vindas
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-primary" style="margin-top: 25px;">
                                <i class="fas fa-save"></i> Guardar Configurações de Assinatura
                            </button>
                        </form>
                    </div>
                    
                    <div id="systemSettingsTab" class="tab-content" style="margin-top: 25px;">
                        <form id="systemSettingsForm">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px;">
                                <div>
                                    <h3 style="margin-bottom: 20px; color: var(--bizzflow-primary);">
                                        <i class="fas fa-sliders-h"></i> Configurações Gerais
                                    </h3>
                                    <div class="form-group">
                                        <label for="currency">Moeda</label>
                                        <select id="currency" class="form-control">
                                            <option value="MZN" selected>Metical (MZN)</option>
                                            <option value="USD">Dólar Americano (USD)</option>
                                            <option value="EUR">Euro (EUR)</option>
                                            <option value="ZAR">Rand Sul-Africano (ZAR)</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="taxRate">IVA (%)</label>
                                        <input type="number" id="taxRate" class="form-control" value="17" min="0" max="100" step="0.1">
                                    </div>
                                    <div class="form-group">
                                        <label for="lowStockThreshold">Stock Mínimo Padrão</label>
                                        <input type="number" id="lowStockThreshold" class="form-control" value="10" min="1">
                                    </div>
                                    <div class="form-group">
                                        <label for="timezone">Fuso Horário</label>
                                        <select id="timezone" class="form-control">
                                            <option value="Africa/Maputo" selected>Maputo, Moçambique</option>
                                            <option value="UTC">UTC</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div>
                                    <h3 style="margin-bottom: 20px; color: var(--bizzflow-primary);">
                                        <i class="fas fa-bell"></i> Notificações e Alertas
                                    </h3>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" id="enableStockAlerts" checked> Alertas de stock baixo
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" id="enableSalesReports" checked> Relatórios de vendas diários
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" id="enableClientBirthdayAlerts" checked> Alertas de aniversário de clientes
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" id="enableAutoBackup" checked> Backup automático
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label for="backupFrequency">Frequência de Backup</label>
                                        <select id="backupFrequency" class="form-control">
                                            <option value="daily">Diariamente</option>
                                            <option value="weekly" selected>Semanalmente</option>
                                            <option value="monthly">Mensalmente</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Guardar Configurações
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Suporte Page -->
            <div id="suportePage" class="page-content" style="display: none;">
                <div class="content-box">
                    <div class="content-header">
                        <h2><i class="fas fa-headset"></i> Suporte e Ajuda</h2>
                    </div>
                    
                    <div class="feature-cards">
                        <div class="feature-card">
                            <i class="fas fa-question-circle"></i>
                            <h3>Central de Ajuda</h3>
                            <p>Aceda à nossa base de conhecimento com tutoriais, FAQs e guias passo-a-passo.</p>
                            <button class="btn btn-primary btn-sm" style="margin-top: 15px;" id="helpCenterBtn">
                                <i class="fas fa-book-open"></i> Aceder Central
                            </button>
                        </div>
                        <div class="feature-card">
                            <i class="fas fa-comments"></i>
                            <h3>Suporte ao Vivo</h3>
                            <p>Converse em tempo real com a nossa equipa de suporte técnico especializado.</p>
                            <button class="btn btn-primary btn-sm" style="margin-top: 15px;" id="liveSupportBtn">
                                <i class="fas fa-comment-dots"></i> Iniciar Chat
                            </button>
                        </div>
                        <div class="feature-card">
                            <i class="fas fa-phone-alt"></i>
                            <h3>Contactos</h3>
                            <p>Ligue para nós ou envie um email. Estamos disponíveis 24/7 para ajudar.</p>
                            <button class="btn btn-primary btn-sm" style="margin-top: 15px;" id="contactSupportBtn">
                                <i class="fas fa-phone"></i> Contactar
                            </button>
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px;">
                        <h3 style="margin-bottom: 20px; color: var(--bizzflow-primary);">Contactos de Suporte</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                <h4 style="color: var(--bizzflow-primary); margin-bottom: 10px;"><i class="fas fa-phone"></i> Telefone</h4>
                                <p>+258 84 123 4567</p>
                                <p style="font-size: 0.9rem; color: var(--bizzflow-gray);">Disponível 24/7</p>
                            </div>
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                <h4 style="color: var(--bizzflow-primary); margin-bottom: 10px;"><i class="fas fa-envelope"></i> Email</h4>
                                <p>suporte@bizzflow.co.mz</p>
                                <p style="font-size: 0.9rem; color: var(--bizzflow-gray);">Resposta em até 2 horas</p>
                            </div>
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                <h4 style="color: var(--bizzflow-primary); margin-bottom: 10px;"><i class="fas fa-map-marker-alt"></i> Endereço</h4>
                                <p>Av. 25 de Setembro, Maputo</p>
                                <p style="font-size: 0.9rem; color: var(--bizzflow-gray);">Moçambique</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAIS -->

    <!-- Modal Adicionar Cliente -->
    <div id="addClientModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-user-plus"></i> Novo Cliente</h2>
                <button class="modal-close" onclick="closeModal('addClientModal')">&times;</button>
            </div>
            <form id="addClientForm">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <div class="form-group">
                            <label for="clientName">Nome Completo *</label>
                            <input type="text" id="clientName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="clientPhone">Telefone *</label>
                            <input type="tel" id="clientPhone" class="form-control" required placeholder="+258 84 123 4567">
                        </div>
                        <div class="form-group">
                            <label for="clientEmail">Email</label>
                            <input type="email" id="clientEmail" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="clientNIF">NIF</label>
                            <input type="text" id="clientNIF" class="form-control">
                        </div>
                    </div>
                    <div>
                        <div class="form-group">
                            <label for="clientAddress">Endereço</label>
                            <textarea id="clientAddress" class="form-control" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="clientType">Tipo de Cliente</label>
                            <select id="clientType" class="form-control">
                                <option value="regular">Regular</option>
                                <option value="vip">VIP</option>
                                <option value="corporate">Corporativo</option>
                                <option value="wholesale">Atacado</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="clientNotes">Observações</label>
                            <textarea id="clientNotes" class="form-control" rows="2"></textarea>
                        </div>
                    </div>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                    <button type="button" class="btn btn-danger" onclick="closeModal('addClientModal')">Cancelar</button>
                    <button type="submit" class="btn btn-success">Guardar Cliente</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Adicionar Produto -->
    <div id="addProductModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-box-plus"></i> Novo Produto</h2>
                <button class="modal-close" onclick="closeModal('addProductModal')">&times;</button>
            </div>
            <form id="addProductForm">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <div class="form-group">
                            <label for="productCode">Código do Produto *</label>
                            <input type="text" id="productCode" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="productName">Nome do Produto *</label>
                            <input type="text" id="productName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="productCategory">Categoria</label>
                            <select id="productCategory" class="form-control">
                                <option value="Geral">Geral</option>
                                <option value="Alimentação">Alimentação</option>
                                <option value="Bebidas">Bebidas</option>
                                <option value="Limpeza">Limpeza</option>
                                <option value="Electrónica">Electrónica</option>
                                <option value="Roupa">Roupa</option>
                                <option value="Farmácia">Farmácia</option>
                                <option value="Construção">Construção</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="productPrice">Preço de Venda (MZN) *</label>
                            <input type="number" id="productPrice" class="form-control" min="0" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="productCost">Custo (MZN)</label>
                            <input type="number" id="productCost" class="form-control" min="0" step="0.01">
                        </div>
                    </div>
                    <div>
                        <div class="form-group">
                            <label for="productStock">Stock Inicial</label>
                            <input type="number" id="productStock" class="form-control" min="0" value="0">
                        </div>
                        <div class="form-group">
                            <label for="productMinStock">Stock Mínimo</label>
                            <input type="number" id="productMinStock" class="form-control" min="0" value="10">
                        </div>
                        <div class="form-group">
                            <label for="productSupplier">Fornecedor</label>
                            <select id="productSupplier" class="form-control">
                                <option value="">Selecionar Fornecedor</option>
                                <!-- Suppliers will be loaded here -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="productBarcode">Código de Barras</label>
                            <input type="text" id="productBarcode" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="productDescription">Descrição</label>
                            <textarea id="productDescription" class="form-control" rows="3"></textarea>
                        </div>
                    </div>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                    <button type="button" class="btn btn-danger" onclick="closeModal('addProductModal')">Cancelar</button>
                    <button type="submit" class="btn btn-success">Guardar Produto</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Nova Venda -->
    <div id="newSaleModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h2><i class="fas fa-cash-register"></i> Nova Venda</h2>
                <button class="modal-close" onclick="closeModal('newSaleModal')">&times;</button>
            </div>
            
            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 25px;">
                <!-- Coluna Esquerda: Produtos e Itens -->
                <div>
                    <div class="form-group">
                        <label for="saleSearchProduct">Buscar Produto</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="saleSearchProduct" class="form-control" placeholder="Digite o nome, código ou código de barras do produto">
                            <button type="button" class="btn btn-outline" id="scanBarcodeBtn">
                                <i class="fas fa-barcode"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div style="border: 1px solid #eaeaea; border-radius: 10px; padding: 15px; margin-bottom: 20px; max-height: 300px; overflow-y: auto;">
                        <h4 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Produtos Disponíveis</h4>
                        <div id="availableProductsList">
                            <!-- Products will be loaded here -->
                        </div>
                    </div>
                    
                    <div style="border: 1px solid #eaeaea; border-radius: 10px; padding: 15px;">
                        <h4 style="margin-bottom: 15px; color: var(--bizzflow-dark);">Itens da Venda</h4>
                        <div class="table-container">
                            <table style="min-width: auto;">
                                <thead>
                                    <tr>
                                        <th>Produto</th>
                                        <th>Qtd</th>
                                        <th>Preço Unit.</th>
                                        <th>Total</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="saleItemsList">
                                    <!-- Sale items will be added here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Coluna Direita: Resumo da Venda -->
                <div>
                    <div class="form-group">
                        <label for="saleClient">Cliente (Opcional)</label>
                        <select id="saleClient" class="form-control">
                            <option value="">Cliente Avulso</option>
                            <!-- Clients will be loaded here -->
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="salePaymentMethod">Forma de Pagamento</label>
                        <select id="salePaymentMethod" class="form-control">
                            <option value="Dinheiro">Dinheiro</option>
                            <option value="Multicaixa">Multicaixa</option>
                            <option value="Transferência">Transferência</option>
                            <option value="M-Pesa">M-Pesa</option>
                            <option value="E-Mola">E-Mola</option>
                            <option value="Crédito">Crédito</option>
                        </select>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Subtotal:</span>
                            <span id="saleSubtotal">0.00 MZN</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Desconto:</span>
                            <span id="saleDiscount">0.00 MZN</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>IVA (17%):</span>
                            <span id="saleTax">0.00 MZN</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 1.3rem; font-weight: bold; padding-top: 10px; border-top: 1px solid #ddd;">
                            <span>Total:</span>
                            <span id="saleTotal">0.00 MZN</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="saleAmountReceived">Valor Recebido (MZN)</label>
                        <input type="number" id="saleAmountReceived" class="form-control" min="0" step="0.01" value="0">
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin-bottom: 20px; font-size: 1.1rem;">
                        <span>Troco:</span>
                        <span id="saleChange" style="font-weight: bold; color: #27ae60;">0.00 MZN</span>
                    </div>
                    
                    <button class="btn btn-success btn-lg" style="width: 100%; padding: 15px; font-size: 1.1rem;" id="completeSaleBtn">
                        <i class="fas fa-check-circle"></i> Finalizar Venda
                    </button>
                    <button class="btn btn-danger" style="width: 100%; margin-top: 10px;" onclick="closeModal('newSaleModal')">
                        <i class="fas fa-times"></i> Cancelar Venda
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Ver Detalhes da Venda -->
    <div id="viewSaleModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2><i class="fas fa-receipt"></i> Detalhes da Venda</h2>
                <button class="modal-close" onclick="closeModal('viewSaleModal')">&times;</button>
            </div>
            <div id="saleDetailsContent">
                <!-- Detalhes da venda serão carregados aqui -->
            </div>
        </div>
    </div>

    <!-- Modal Novo Plano -->
    <div id="newPlanModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2><i class="fas fa-crown"></i> Novo Plano de Assinatura</h2>
                <button class="modal-close" onclick="closeModal('newPlanModal')">&times;</button>
            </div>
            <form id="newPlanForm">
                <div class="form-group">
                    <label for="planName">Nome do Plano *</label>
                    <input type="text" id="planName" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="planDescription">Descrição</label>
                    <textarea id="planDescription" class="form-control" rows="3"></textarea>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label for="planPrice">Preço Mensal (MZN) *</label>
                        <input type="number" id="planPrice" class="form-control" min="0" step="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="planBillingCycle">Ciclo de Faturação</label>
                        <select id="planBillingCycle" class="form-control">
                            <option value="monthly">Mensal</option>
                            <option value="quarterly">Trimestral</option>
                            <option value="semiannual">Semestral</option>
                            <option value="annual">Anual</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Funcionalidades Incluídas</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="featureDashboard" checked> Dashboard
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="featureClients"> Gestão de Clientes
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="featureProducts"> Gestão de Produtos
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="featureSales"> Gestão de Vendas
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="featureReports"> Relatórios Avançados
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="featureExport"> Exportação de Dados
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="featureImport"> Importação de Dados
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="featureSupport"> Suporte Prioritário
                        </label>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label for="planMaxClients">Máximo de Clientes</label>
                        <input type="number" id="planMaxClients" class="form-control" min="1" value="100">
                    </div>
                    
                    <div class="form-group">
                        <label for="planMaxProducts">Máximo de Produtos</label>
                        <input type="number" id="planMaxProducts" class="form-control" min="1" value="500">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="planStatus">Status do Plano</label>
                    <select id="planStatus" class="form-control">
                        <option value="active">Ativo</option>
                        <option value="inactive">Inativo</option>
                        <option value="archived">Arquivado</option>
                    </select>
                </div>
                
                <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                    <button type="button" class="btn btn-danger" onclick="closeModal('newPlanModal')">Cancelar</button>
                    <button type="submit" class="btn btn-success">Criar Plano</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Nova Assinatura -->
    <div id="newSubscriptionModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2><i class="fas fa-file-contract"></i> Nova Assinatura</h2>
                <button class="modal-close" onclick="closeModal('newSubscriptionModal')">&times;</button>
            </div>
            <form id="newSubscriptionForm">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <div class="form-group">
                            <label for="subscriptionClient">Cliente *</label>
                            <select id="subscriptionClient" class="form-control" required>
                                <option value="">Selecionar Cliente</option>
                                <!-- Clients will be loaded here -->
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="subscriptionPlan">Plano *</label>
                            <select id="subscriptionPlan" class="form-control" required>
                                <option value="">Selecionar Plano</option>
                                <!-- Plans will be loaded here -->
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="subscriptionStartDate">Data de Início *</label>
                            <input type="date" id="subscriptionStartDate" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="subscriptionTrialDays">Dias de Teste Gratuito</label>
                            <input type="number" id="subscriptionTrialDays" class="form-control" min="0" max="365" value="7">
                        </div>
                    </div>
                    
                    <div>
                        <div class="form-group">
                            <label for="subscriptionPaymentMethod">Forma de Pagamento *</label>
                            <select id="subscriptionPaymentMethod" class="form-control" required>
                                <option value="Multicaixa">Multicaixa</option>
                                <option value="M-Pesa">M-Pesa</option>
                                <option value="E-Mola">E-Mola</option>
                                <option value="Transferência">Transferência Bancária</option>
                                <option value="Cartão">Cartão de Crédito</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="subscriptionStatus">Status</label>
                            <select id="subscriptionStatus" class="form-control">
                                <option value="active">Ativa</option>
                                <option value="trial">Período de Teste</option>
                                <option value="pending">Pendente</option>
                                <option value="cancelled">Cancelada</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="subscriptionNotes">Observações</label>
                            <textarea id="subscriptionNotes" class="form-control" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="subscriptionAutoRenew" checked> Renovação Automática
                            </label>
                        </div>
                    </div>
                </div>
                
                <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                    <button type="button" class="btn btn-danger" onclick="closeModal('newSubscriptionModal')">Cancelar</button>
                    <button type="submit" class="btn btn-success">Criar Assinatura</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Notificações -->
    <div id="notificationsModal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h2><i class="fas fa-bell"></i> Notificações</h2>
                <button class="modal-close" onclick="closeModal('notificationsModal')">&times;</button>
            </div>
            <div id="notificationsList">
                <div style="padding: 15px; border-bottom: 1px solid #f0f0f0;">
                    <div style="font-weight: 600; margin-bottom: 5px;">Stock Baixo</div>
                    <div style="font-size: 0.9rem; color: var(--bizzflow-gray);">Produto "Arroz 5kg" está com stock baixo</div>
                    <div style="font-size: 0.8rem; color: var(--bizzflow-gray); margin-top: 5px;">Há 2 horas</div>
                </div>
                <div style="padding: 15px; border-bottom: 1px solid #f0f0f0;">
                    <div style="font-weight: 600; margin-bottom: 5px;">Nova Venda</div>
                    <div style="font-size: 0.9rem; color: var(--bizzflow-gray);">Venda realizada no valor de 1.200 MZN</div>
                    <div style="font-size: 0.8rem; color: var(--bizzflow-gray); margin-top: 5px;">Hoje, 10:30</div>
                </div>
                <div style="padding: 15px;">
                    <div style="font-weight: 600; margin-bottom: 5px;">Backup Concluído</div>
                    <div style="font-size: 0.9rem; color: var(--bizzflow-gray);">Backup automático realizado com sucesso</div>
                    <div style="font-size: 0.8rem; color: var(--bizzflow-gray); margin-top: 5px;">Ontem, 23:00</div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-outline btn-sm" onclick="closeModal('notificationsModal')">
                    <i class="fas fa-check"></i> Marcar Todas como Lidas
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Entrada de Stock -->
    <div id="stockEntryModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2><i class="fas fa-plus-circle"></i> Nova Entrada de Stock</h2>
                <button class="modal-close" onclick="closeModal('stockEntryModal')">&times;</button>
            </div>
            <form id="stockEntryForm">
                <div class="form-group">
                    <label for="stockEntryProduct">Produto *</label>
                    <select id="stockEntryProduct" class="form-control" required>
                        <option value="">Selecionar Produto</option>
                        <!-- Products will be loaded here -->
                    </select>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label for="stockEntryQuantity">Quantidade *</label>
                        <input type="number" id="stockEntryQuantity" class="form-control" min="1" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="stockEntryUnitCost">Custo Unitário (MZN)</label>
                        <input type="number" id="stockEntryUnitCost" class="form-control" min="0" step="0.01">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="stockEntrySupplier">Fornecedor</label>
                    <select id="stockEntrySupplier" class="form-control">
                        <option value="">Selecionar Fornecedor</option>
                        <!-- Suppliers will be loaded here -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="stockEntryNotes">Observações</label>
                    <textarea id="stockEntryNotes" class="form-control" rows="3"></textarea>
                </div>
                
                <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                    <button type="button" class="btn btn-danger" onclick="closeModal('stockEntryModal')">Cancelar</button>
                    <button type="submit" class="btn btn-success">Registar Entrada</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Saída de Stock -->
    <div id="stockOutputModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2><i class="fas fa-minus-circle"></i> Nova Saída de Stock</h2>
                <button class="modal-close" onclick="closeModal('stockOutputModal')">&times;</button>
            </div>
            <form id="stockOutputForm">
                <div class="form-group">
                    <label for="stockOutputProduct">Produto *</label>
                    <select id="stockOutputProduct" class="form-control" required>
                        <option value="">Selecionar Produto</option>
                        <!-- Products will be loaded here -->
                    </select>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label for="stockOutputQuantity">Quantidade *</label>
                        <input type="number" id="stockOutputQuantity" class="form-control" min="1" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="stockOutputReason">Motivo *</label>
                        <select id="stockOutputReason" class="form-control" required>
                            <option value="venda">Venda</option>
                            <option value="devolucao">Devolução</option>
                            <option value="dano">Produto Danificado</option>
                            <option value="perda">Perda</option>
                            <option value="outro">Outro</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="stockOutputClient">Cliente (para vendas)</label>
                    <select id="stockOutputClient" class="form-control">
                        <option value="">Selecionar Cliente</option>
                        <!-- Clients will be loaded here -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="stockOutputNotes">Observações</label>
                    <textarea id="stockOutputNotes" class="form-control" rows="3"></textarea>
                </div>
                
                <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                    <button type="button" class="btn btn-danger" onclick="closeModal('stockOutputModal')">Cancelar</button>
                    <button type="submit" class="btn btn-success">Registar Saída</button>
                </div>
            </form>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // ==============================================
        // VARIÁVEIS GLOBAIS
        // ==============================================
        console.log('🚀 Inicializando BizzFlow CRM...');
        
        // Variáveis para armazenar instâncias de gráficos
        window.salesChartInstance = null;
        window.categoryChartInstance = null;
        window.reportSalesChartInstance = null;
        window.reportProductsChartInstance = null;
        window.cashflowChartInstance = null;
        window.investmentChartInstance = null;
        
        // ==============================================
        // FUNÇÕES DE DADOS (LOCALSTORAGE)
        // ==============================================
        
        // Inicializar localStorage com dados de exemplo se estiver vazio
        function initializeData() {
            if (!localStorage.getItem('bizzflow_initialized')) {
                console.log('📊 Inicializando dados de exemplo...');
                const sampleData = {
                    clients: [
                        {
                            id: 1,
                            name: "João Maputo",
                            phone: "+258 84 111 2222",
                            email: "joao@email.com",
                            nif: "100000001",
                            address: "Maputo",
                            type: "vip",
                            notes: "Cliente regular, compra todas as semanas",
                            total_purchases: 12500,
                            last_purchase: "2024-01-20",
                            created_at: "2024-01-15"
                        },
                        {
                            id: 2,
                            name: "Maria Matola",
                            phone: "+258 85 222 3333",
                            email: "maria@email.com",
                            nif: "100000002",
                            address: "Matola",
                            type: "regular",
                            notes: "",
                            total_purchases: 8500,
                            last_purchase: "2024-01-18",
                            created_at: "2024-01-20"
                        },
                        {
                            id: 3,
                            name: "Empresa Construção Lda",
                            phone: "+258 86 333 4444",
                            email: "construcao@empresa.com",
                            nif: "100000003",
                            address: "Beira",
                            type: "corporate",
                            notes: "Cliente corporativo, paga a 30 dias",
                            total_purchases: 45000,
                            last_purchase: "2024-01-15",
                            created_at: "2023-12-10"
                        }
                    ],
                    products: [
                        {
                            id: 1,
                            code: "PROD001",
                            name: "Arroz 5kg",
                            category: "Alimentação",
                            price: 350,
                            cost: 280,
                            stock: 45,
                            min_stock: 10,
                            barcode: "123456789012",
                            supplier: "Fornecedor A",
                            description: "Arroz branco de alta qualidade"
                        },
                        {
                            id: 2,
                            code: "PROD002",
                            name: "Feijão 1kg",
                            category: "Alimentação",
                            price: 120,
                            cost: 90,
                            stock: 28,
                            min_stock: 15,
                            barcode: "123456789013",
                            supplier: "Fornecedor A",
                            description: "Feijão vermelho"
                        },
                        {
                            id: 3,
                            code: "PROD003",
                            name: "Óleo 1L",
                            category: "Alimentação",
                            price: 150,
                            cost: 110,
                            stock: 32,
                            min_stock: 10,
                            barcode: "123456789014",
                            supplier: "Fornecedor B",
                            description: "Óleo vegetal"
                        },
                        {
                            id: 4,
                            code: "PROD004",
                            name: "Sabão em Pó",
                            category: "Limpeza",
                            price: 85,
                            cost: 60,
                            stock: 8,
                            min_stock: 10,
                            barcode: "123456789015",
                            supplier: "Fornecedor C",
                            description: "Sabão para roupa"
                        },
                        {
                            id: 5,
                            code: "PROD005",
                            name: "Detergente 500ml",
                            category: "Limpeza",
                            price: 65,
                            cost: 45,
                            stock: 42,
                            min_stock: 15,
                            barcode: "123456789016",
                            supplier: "Fornecedor C",
                            description: "Detergente líquido"
                        }
                    ],
                    sales: [
                        {
                            id: 1,
                            receipt_no: "REC001",
                            client_id: 1,
                            client_name: "João Maputo",
                            items: [
                                {product_id: 1, name: "Arroz 5kg", quantity: 2, price: 350, total: 700},
                                {product_id: 3, name: "Óleo 1L", quantity: 1, price: 150, total: 150}
                            ],
                            subtotal: 850,
                            discount: 0,
                            tax: 144.5,
                            total: 994.5,
                            payment_method: "Multicaixa",
                            amount_received: 1000,
                            change: 5.5,
                            date: new Date().toISOString().split('T')[0],
                            time: "14:30",
                            seller: "Administrador"
                        },
                        {
                            id: 2,
                            receipt_no: "REC002",
                            client_id: 2,
                            client_name: "Maria Matola",
                            items: [
                                {product_id: 2, name: "Feijão 1kg", quantity: 3, price: 120, total: 360},
                                {product_id: 4, name: "Sabão em Pó", quantity: 2, price: 85, total: 170},
                                {product_id: 5, name: "Detergente 500ml", quantity: 1, price: 65, total: 65}
                            ],
                            subtotal: 595,
                            discount: 20,
                            tax: 97.75,
                            total: 672.75,
                            payment_method: "Dinheiro",
                            amount_received: 700,
                            change: 27.25,
                            date: new Date().toISOString().split('T')[0],
                            time: "10:15",
                            seller: "Administrador"
                        }
                    ],
                    suppliers: [
                        {
                            id: 1,
                            name: "Fornecedor A",
                            contact: "+258 84 111 9999",
                            email: "fornecedorA@email.com",
                            products: ["Arroz", "Feijão", "Açúcar"],
                            last_delivery: "2024-01-18",
                            rating: 4.5
                        },
                        {
                            id: 2,
                            name: "Fornecedor B",
                            contact: "+258 85 222 8888",
                            email: "fornecedorB@email.com",
                            products: ["Óleo", "Margarina"],
                            last_delivery: "2024-01-20",
                            rating: 4.2
                        }
                    ],
                    team: [
                        {
                            id: 1,
                            name: "Administrador",
                            role: "Super Admin",
                            contact: "+258 84 123 4567",
                            email: "admin@bizzflow.co.mz",
                            join_date: "2024-01-01",
                            sales: 12450,
                            status: "active"
                        },
                        {
                            id: 2,
                            name: "Carlos Vendedor",
                            role: "Vendedor",
                            contact: "+258 85 234 5678",
                            email: "carlos@bizzflow.co.mz",
                            join_date: "2024-01-10",
                            sales: 8450,
                            status: "active"
                        }
                    ],
                    plans: [
                        {
                            id: 1,
                            name: "Plano Básico",
                            description: "Ideal para pequenas empresas e startups",
                            price: 499.99,
                            billing_cycle: "monthly",
                            features: ["dashboard", "clientes", "produtos", "vendas", "relatorios_basicos"],
                            max_clients: 50,
                            max_products: 100,
                            status: "active",
                            trial_days: 7,
                            is_popular: false
                        },
                        {
                            id: 2,
                            name: "Plano Profissional",
                            description: "Para empresas em crescimento com múltiplas necessidades",
                            price: 999.99,
                            billing_cycle: "monthly",
                            features: ["dashboard", "clientes", "produtos", "vendas", "relatorios_avancados", "exportar", "importar"],
                            max_clients: 200,
                            max_products: 500,
                            status: "active",
                            trial_days: 7,
                            is_popular: true
                        },
                        {
                            id: 3,
                            name: "Plano Empresarial",
                            description: "Solução completa para grandes empresas",
                            price: 1999.99,
                            billing_cycle: "monthly",
                            features: ["dashboard", "clientes", "produtos", "vendas", "relatorios_avancados", "exportar", "importar", "suporte_prioritario", "api_access"],
                            max_clients: 1000,
                            max_products: 5000,
                            status: "active",
                            trial_days: 14,
                            is_popular: false
                        }
                    ],
                    subscriptions: [
                        {
                            id: 1,
                            client_id: 1,
                            client_name: "João Maputo",
                            plan_id: 2,
                            plan_name: "Plano Profissional",
                            start_date: "2024-01-15",
                            end_date: "2024-02-14",
                            next_payment: "2024-02-14",
                            price: 999.99,
                            status: "active",
                            payment_method: "Multicaixa",
                            trial_end: "2024-01-22",
                            auto_renew: true,
                            notes: "Cliente satisfeito com o sistema"
                        },
                        {
                            id: 2,
                            client_id: 3,
                            client_name: "Empresa Construção Lda",
                            plan_id: 3,
                            plan_name: "Plano Empresarial",
                            start_date: "2024-01-10",
                            end_date: "2024-02-09",
                            next_payment: "2024-02-09",
                            price: 1999.99,
                            status: "trial",
                            payment_method: "Transferência",
                            trial_end: "2024-01-24",
                            auto_renew: true,
                            notes: "Em período de teste"
                        }
                    ],
                    settings: {
                        company_name: "Bizz Flow Lda",
                        company_nif: "123456789",
                        company_address: "Av. 25 de Setembro, Maputo",
                        company_phone: "+258 84 123 4567",
                        company_email: "info@bizzflow.co.mz",
                        currency: "MZN",
                        tax_rate: 17,
                        low_stock_threshold: 10,
                        enable_stock_alerts: true,
                        enable_sales_reports: true,
                        auto_print_invoice: true,
                        invoice_prefix: "FAT",
                        invoice_start_number: 1001,
                        timezone: "Africa/Maputo",
                        trial_days: 7,
                        trial_features: ["dashboard", "clientes", "produtos", "vendas", "relatorios_basicos"],
                        trial_max_clients: 50,
                        trial_max_products: 100,
                        trial_max_sales: 100,
                        trial_auto_cancel: true,
                        trial_notifications: true,
                        trial_card_required: false
                    },
                    subscription_settings: {
                        currency: "MZN",
                        trial_period_days: 7,
                        grace_period_days: 3,
                        auto_renewal: "enabled",
                        payment_methods: ["Multicaixa", "M-Pesa", "E-Mola", "Transferência"],
                        invoice_days_before: 7,
                        reminder_days: [7, 3, 1],
                        notify_trial_end: true,
                        notify_before_renewal: true,
                        notify_payment_failed: true,
                        notify_subscription_end: true,
                        notify_auto_renewal: true,
                        send_welcome_email: true
                    },
                    financial: {
                        current_balance: 25000,
                        monthly_income: 50000,
                        monthly_expenses: 25000,
                        monthly_profit: 25000
                    },
                    investments: {
                        total_invested: 100000,
                        roi_percentage: 25,
                        growth_rate: 12.5,
                        profit_margin: 20
                    },
                    stock_movements: [
                        {
                            id: 1,
                            product_id: 1,
                            product_name: "Arroz 5kg",
                            type: "entrada",
                            quantity: 50,
                            unit_cost: 280,
                            total_cost: 14000,
                            supplier_id: 1,
                            supplier_name: "Fornecedor A",
                            date: "2024-01-15",
                            responsible: "Administrador",
                            notes: "Compra mensal"
                        },
                        {
                            id: 2,
                            product_id: 1,
                            product_name: "Arroz 5kg",
                            type: "saida",
                            quantity: 2,
                            reason: "venda",
                            client_id: 1,
                            client_name: "João Maputo",
                            date: new Date().toISOString().split('T')[0],
                            responsible: "Administrador",
                            notes: "Venda REC001"
                        }
                    ],
                    next_ids: {
                        client: 4,
                        product: 6,
                        sale: 3,
                        supplier: 3,
                        team: 3,
                        plan: 4,
                        subscription: 3,
                        stock_movement: 3
                    }
                };
                
                localStorage.setItem('bizzflow_clients', JSON.stringify(sampleData.clients));
                localStorage.setItem('bizzflow_products', JSON.stringify(sampleData.products));
                localStorage.setItem('bizzflow_sales', JSON.stringify(sampleData.sales));
                localStorage.setItem('bizzflow_suppliers', JSON.stringify(sampleData.suppliers));
                localStorage.setItem('bizzflow_team', JSON.stringify(sampleData.team));
                localStorage.setItem('bizzflow_plans', JSON.stringify(sampleData.plans));
                localStorage.setItem('bizzflow_subscriptions', JSON.stringify(sampleData.subscriptions));
                localStorage.setItem('bizzflow_settings', JSON.stringify(sampleData.settings));
                localStorage.setItem('bizzflow_subscription_settings', JSON.stringify(sampleData.subscription_settings));
                localStorage.setItem('bizzflow_financial', JSON.stringify(sampleData.financial));
                localStorage.setItem('bizzflow_investments', JSON.stringify(sampleData.investments));
                localStorage.setItem('bizzflow_next_ids', JSON.stringify(sampleData.next_ids));
                localStorage.setItem('bizzflow_stock_movements', JSON.stringify(sampleData.stock_movements));
                localStorage.setItem('bizzflow_initialized', 'true');
                
                console.log('✅ Dados de exemplo inicializados');
            }
        }

        // ==============================================
        // FUNÇÕES DE GESTÃO DE DADOS
        // ==============================================
        
        function getClients() {
            return JSON.parse(localStorage.getItem('bizzflow_clients') || '[]');
        }

        function getProducts() {
            return JSON.parse(localStorage.getItem('bizzflow_products') || '[]');
        }

        function getSales() {
            return JSON.parse(localStorage.getItem('bizzflow_sales') || '[]');
        }

        function getSuppliers() {
            return JSON.parse(localStorage.getItem('bizzflow_suppliers') || '[]');
        }

        function getTeam() {
            return JSON.parse(localStorage.getItem('bizzflow_team') || '[]');
        }

        function getPlans() {
            return JSON.parse(localStorage.getItem('bizzflow_plans') || '[]');
        }

        function getSubscriptions() {
            return JSON.parse(localStorage.getItem('bizzflow_subscriptions') || '[]');
        }

        function getSettings() {
            return JSON.parse(localStorage.getItem('bizzflow_settings') || '{}');
        }

        function getSubscriptionSettings() {
            return JSON.parse(localStorage.getItem('bizzflow_subscription_settings') || '{}');
        }

        function getFinancial() {
            return JSON.parse(localStorage.getItem('bizzflow_financial') || '{}');
        }

        function getInvestments() {
            return JSON.parse(localStorage.getItem('bizzflow_investments') || '{}');
        }

        function getStockMovements() {
            return JSON.parse(localStorage.getItem('bizzflow_stock_movements') || '[]');
        }

        function getNextId(type) {
            const nextIds = JSON.parse(localStorage.getItem('bizzflow_next_ids') || '{"client": 1, "product": 1, "sale": 1, "supplier": 1, "team": 1, "plan": 1, "subscription": 1, "stock_movement": 1}');
            return nextIds[type] || 1;
        }

        function saveNextId(type, id) {
            const nextIds = JSON.parse(localStorage.getItem('bizzflow_next_ids') || '{"client": 1, "product": 1, "sale": 1, "supplier": 1, "team": 1, "plan": 1, "subscription": 1, "stock_movement": 1}');
            nextIds[type] = id;
            localStorage.setItem('bizzflow_next_ids', JSON.stringify(nextIds));
        }

        function saveClients(clients) {
            localStorage.setItem('bizzflow_clients', JSON.stringify(clients));
        }

        function saveProducts(products) {
            localStorage.setItem('bizzflow_products', JSON.stringify(products));
        }

        function saveSales(sales) {
            localStorage.setItem('bizzflow_sales', JSON.stringify(sales));
        }

        function saveSuppliers(suppliers) {
            localStorage.setItem('bizzflow_suppliers', JSON.stringify(suppliers));
        }

        function saveTeam(team) {
            localStorage.setItem('bizzflow_team', JSON.stringify(team));
        }

        function savePlans(plans) {
            localStorage.setItem('bizzflow_plans', JSON.stringify(plans));
        }

        function saveSubscriptions(subscriptions) {
            localStorage.setItem('bizzflow_subscriptions', JSON.stringify(subscriptions));
        }

        function saveSettings(settings) {
            localStorage.setItem('bizzflow_settings', JSON.stringify(settings));
        }

        function saveSubscriptionSettings(settings) {
            localStorage.setItem('bizzflow_subscription_settings', JSON.stringify(settings));
        }

        function saveFinancial(financial) {
            localStorage.setItem('bizzflow_financial', JSON.stringify(financial));
        }

        function saveInvestments(investments) {
            localStorage.setItem('bizzflow_investments', JSON.stringify(investments));
        }

        function saveStockMovements(movements) {
            localStorage.setItem('bizzflow_stock_movements', JSON.stringify(movements));
        }

        // ==============================================
        // FUNÇÕES DE UI
        // ==============================================
        
        function showNotification(message, type = 'success') {
            // Criar elemento de notificação
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <span class="notification-icon">${getNotificationIcon(type)}</span>
                    <span class="notification-text">${message}</span>
                    <button class="notification-close" onclick="this.parentElement.parentElement.remove()">
                        &times;
                    </button>
                </div>
            `;
            
            // Estilos
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${getNotificationColor(type)};
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 9999;
                min-width: 300px;
                max-width: 400px;
                animation: slideIn 0.3s ease-out;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            `;
            
            document.body.appendChild(notification);
            
            // Remover após 5 segundos
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.style.animation = 'slideOut 0.3s ease-out';
                    setTimeout(() => {
                        if (notification.parentElement) {
                            notification.remove();
                        }
                    }, 300);
                }
            }, 5000);
        }
        
        function getNotificationIcon(type) {
            switch(type) {
                case 'success': return '✅';
                case 'error': return '❌';
                case 'warning': return '⚠️';
                case 'info': return 'ℹ️';
                default: return '💡';
            }
        }
        
        function getNotificationColor(type) {
            switch(type) {
                case 'success': return '#10B981';
                case 'error': return '#EF4444';
                case 'warning': return '#F59E0B';
                case 'info': return '#3B82F6';
                default: return '#6B7280';
            }
        }
        
        // ==============================================
        // FUNÇÕES DE NAVEGAÇÃO
        // ==============================================
        
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        function showPage(pageId) {
            // Esconder todas as páginas
            document.querySelectorAll('.page-content').forEach(page => {
                page.style.display = 'none';
            });
            
            // Mostrar a página selecionada
            const pageElement = document.getElementById(pageId + 'Page');
            if (pageElement) {
                pageElement.style.display = 'block';
                
                // Atualizar título da página
                const menuItem = document.querySelector(`[data-page="${pageId}"]`);
                if (menuItem) {
                    const pageTitle = menuItem.querySelector('span').textContent;
                    document.getElementById('pageTitle').textContent = pageTitle;
                    
                    // Atualizar subtítulo baseado na página
                    let subtitle = '';
                    switch(pageId) {
                        case 'dashboard': subtitle = 'Visão geral do seu negócio em tempo real'; break;
                        case 'clientes': subtitle = 'Gerencie sua base de clientes'; break;
                        case 'produtos': subtitle = 'Controle de inventário e produtos'; break;
                        case 'vendas': subtitle = 'Histórico e novas vendas'; break;
                        case 'financeiro': subtitle = 'Controle financeiro completo'; break;
                        case 'relatorios': subtitle = 'Análises e relatórios detalhados'; break;
                        case 'investimentos': subtitle = 'Dashboard do investidor'; break;
                        case 'planos': subtitle = 'Planos de assinatura disponíveis'; break;
                        case 'assinaturas': subtitle = 'Gestão de assinaturas ativas'; break;
                        case 'exportar': subtitle = 'Importar e exportar dados'; break;
                        case 'stock': subtitle = 'Gestão de stock e inventário'; break;
                        case 'fornecedores': subtitle = 'Gestão de fornecedores'; break;
                        case 'encomendas': subtitle = 'Controlo de encomendas'; break;
                        case 'equipa': subtitle = 'Gestão da equipa de trabalho'; break;
                        case 'configuracoes': subtitle = 'Configurações do sistema'; break;
                        case 'suporte': subtitle = 'Central de ajuda e suporte'; break;
                        default: subtitle = 'Página do sistema';
                    }
                    document.getElementById('pageSubtitle').textContent = subtitle;
                    
                    // Atualizar item ativo no menu
                    document.querySelectorAll('.menu-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    menuItem.classList.add('active');
                    
                    // Atualizar dados da página específica
                    updatePageData(pageId);
                }
            } else {
                console.error(`Página ${pageId} não encontrada`);
            }
        }
        
        function updatePageData(pageId) {
            switch(pageId) {
                case 'dashboard':
                    updateDashboard();
                    break;
                case 'clientes':
                    updateClientsTable();
                    break;
                case 'produtos':
                    updateProductsTable();
                    break;
                case 'vendas':
                    updateSalesTable();
                    break;
                case 'financeiro':
                    updateFinancialData();
                    break;
                case 'relatorios':
                    updateReportsData();
                    break;
                case 'investimentos':
                    updateInvestmentsData();
                    break;
                case 'planos':
                    updatePlansData();
                    break;
                case 'assinaturas':
                    updateSubscriptionsTable();
                    break;
                case 'exportar':
                    // Nada a fazer por enquanto
                    break;
                case 'stock':
                    updateStockData();
                    break;
                case 'fornecedores':
                    updateSuppliersTable();
                    break;
                case 'encomendas':
                    updateOrdersTable();
                    break;
                case 'equipa':
                    updateTeamTable();
                    break;
                case 'configuracoes':
                    // Carregar configurações nos formulários
                    loadSettings();
                    break;
            }
        }
        
        function switchLoginTab(tabId) {
            // Atualizar tabs
            document.querySelectorAll('[data-tab]').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
            
            // Atualizar conteúdo
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabId + 'Tab').classList.add('active');
        }
        
        // ==============================================
        // FUNÇÕES DE GRÁFICOS
        // ==============================================
        
        function updateCharts() {
            console.log('📈 Atualizando gráficos...');
            
            const sales = getSales();
            const products = getProducts();
            
            // Verificar se Chart.js está disponível
            if (typeof Chart === 'undefined') {
                console.warn('Chart.js não disponível');
                return;
            }
            
            try {
                // Gráfico de vendas diárias
                const salesByDay = {};
                const last7Days = [...Array(7)].map((_, i) => {
                    const d = new Date();
                    d.setDate(d.getDate() - i);
                    return d.toISOString().split('T')[0];
                }).reverse();
                
                last7Days.forEach(day => {
                    salesByDay[day] = 0;
                });
                
                sales.forEach(sale => {
                    if (salesByDay[sale.date] !== undefined) {
                        salesByDay[sale.date] += sale.total;
                    }
                });
                
                const salesChartCtx = document.getElementById('salesChart');
                if (salesChartCtx) {
                    // Destruir gráfico existente se houver
                    if (window.salesChartInstance) {
                        window.salesChartInstance.destroy();
                    }
                    
                    window.salesChartInstance = new Chart(salesChartCtx.getContext('2d'), {
                        type: 'line',
                        data: {
                            labels: last7Days.map(d => {
                                const date = new Date(d);
                                return date.toLocaleDateString('pt-MZ', { day: '2-digit', month: '2-digit' });
                            }),
                            datasets: [{
                                label: 'Vendas (MZN)',
                                data: Object.values(salesByDay),
                                borderColor: '#3498db',
                                backgroundColor: 'rgba(52, 152, 219, 0.1)',
                                borderWidth: 3,
                                tension: 0.4,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: {
                                        color: 'rgba(0, 0, 0, 0.05)'
                                    },
                                    ticks: {
                                        callback: function(value) {
                                            return value.toFixed(2) + ' MZN';
                                        }
                                    }
                                },
                                x: {
                                    grid: {
                                        color: 'rgba(0, 0, 0, 0.05)'
                                    }
                                }
                            }
                        }
                    });
                }
                
                // Gráfico de categorias
                const categories = {};
                products.forEach(product => {
                    if (!categories[product.category]) {
                        categories[product.category] = 0;
                    }
                    categories[product.category]++;
                });
                
                const categoryChartCtx = document.getElementById('categoryChart');
                if (categoryChartCtx) {
                    // Destruir gráfico existente se houver
                    if (window.categoryChartInstance) {
                        window.categoryChartInstance.destroy();
                    }
                    
                    window.categoryChartInstance = new Chart(categoryChartCtx.getContext('2d'), {
                        type: 'doughnut',
                        data: {
                            labels: Object.keys(categories),
                            datasets: [{
                                data: Object.values(categories),
                                backgroundColor: [
                                    '#3498db',
                                    '#2ecc71',
                                    '#f39c12',
                                    '#e74c3c',
                                    '#9b59b6',
                                    '#1abc9c',
                                    '#d35400'
                                ]
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'bottom'
                                }
                            }
                        }
                    });
                }
                
                console.log('✅ Gráficos atualizados com sucesso');
            } catch (error) {
                console.error('❌ Erro ao atualizar gráficos:', error);
            }
        }
        
        function updateReportCharts() {
            console.log('📊 Atualizando gráficos de relatórios...');
            
            const sales = getSales();
            
            if (typeof Chart === 'undefined') {
                console.warn('Chart.js não disponível');
                return;
            }
            
            try {
                // Gráfico de vendas por dia para relatórios
                const salesByDay = {};
                const last30Days = [...Array(30)].map((_, i) => {
                    const d = new Date();
                    d.setDate(d.getDate() - i);
                    return d.toISOString().split('T')[0];
                }).reverse();
                
                last30Days.forEach(day => {
                    salesByDay[day] = 0;
                });
                
                sales.forEach(sale => {
                    if (salesByDay[sale.date] !== undefined) {
                        salesByDay[sale.date] += sale.total;
                    }
                });
                
                const reportSalesChartCtx = document.getElementById('reportSalesChart');
                if (reportSalesChartCtx) {
                    // Destruir gráfico existente
                    if (window.reportSalesChartInstance) {
                        window.reportSalesChartInstance.destroy();
                    }
                    
                    const labels = last30Days.map(d => {
                        const date = new Date(d);
                        return date.toLocaleDateString('pt-MZ', { day: '2-digit', month: '2-digit' });
                    });
                    
                    window.reportSalesChartInstance = new Chart(reportSalesChartCtx.getContext('2d'), {
                        type: 'bar',
                        data: {
                            labels: labels,
                            datasets: [{
                                label: 'Vendas (MZN)',
                                data: Object.values(salesByDay),
                                backgroundColor: '#3498db',
                                borderColor: '#2980b9',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    ticks: {
                                        callback: function(value) {
                                            return value.toFixed(2) + ' MZN';
                                        }
                                    }
                                }
                            }
                        }
                    });
                }
                
                console.log('✅ Gráficos de relatórios atualizados');
            } catch (error) {
                console.error('❌ Erro ao atualizar gráficos de relatórios:', error);
            }
        }
        
        function updateFinancialCharts() {
            console.log('💰 Atualizando gráficos financeiros...');
            
            const financial = getFinancial();
            
            if (typeof Chart === 'undefined') {
                console.warn('Chart.js não disponível');
                return;
            }
            
            try {
                const cashflowChartCtx = document.getElementById('cashflowChart');
                if (cashflowChartCtx) {
                    // Destruir gráfico existente
                    if (window.cashflowChartInstance) {
                        window.cashflowChartInstance.destroy();
                    }
                    
                    // Dados de exemplo para fluxo de caixa
                    const months = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'];
                    const income = [45000, 52000, 48000, 61000, 55000, 59000];
                    const expenses = [22000, 25000, 23000, 28000, 26000, 27000];
                    
                    window.cashflowChartInstance = new Chart(cashflowChartCtx.getContext('2d'), {
                        type: 'line',
                        data: {
                            labels: months,
                            datasets: [
                                {
                                    label: 'Receitas',
                                    data: income,
                                    borderColor: '#2ecc71',
                                    backgroundColor: 'rgba(46, 204, 113, 0.1)',
                                    borderWidth: 3,
                                    fill: true
                                },
                                {
                                    label: 'Despesas',
                                    data: expenses,
                                    borderColor: '#e74c3c',
                                    backgroundColor: 'rgba(231, 76, 60, 0.1)',
                                    borderWidth: 3,
                                    fill: true
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'top'
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    ticks: {
                                        callback: function(value) {
                                            return value.toLocaleString('pt-MZ') + ' MZN';
                                        }
                                    }
                                }
                            }
                        }
                    });
                }
                
                console.log('✅ Gráficos financeiros atualizados');
            } catch (error) {
                console.error('❌ Erro ao atualizar gráficos financeiros:', error);
            }
        }
        
        function updateInvestmentChart() {
            console.log('📊 Atualizando gráfico de investimentos...');
            
            const investments = getInvestments();
            
            if (typeof Chart === 'undefined') {
                console.warn('Chart.js não disponível');
                return;
            }
            
            try {
                const investmentChartCtx = document.getElementById('investmentChart');
                if (investmentChartCtx) {
                    // Destruir gráfico existente
                    if (window.investmentChartInstance) {
                        window.investmentChartInstance.destroy();
                    }
                    
                    // Dados de exemplo para performance de investimento
                    const months = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'];
                    const values = [100000, 105000, 112000, 118000, 125000, 132000];
                    
                    window.investmentChartInstance = new Chart(investmentChartCtx.getContext('2d'), {
                        type: 'line',
                        data: {
                            labels: months,
                            datasets: [{
                                label: 'Valor do Investimento',
                                data: values,
                                borderColor: '#9b59b6',
                                backgroundColor: 'rgba(155, 89, 182, 0.1)',
                                borderWidth: 3,
                                tension: 0.4,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'top'
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: false,
                                    ticks: {
                                        callback: function(value) {
                                            return value.toLocaleString('pt-MZ') + ' MZN';
                                        }
                                    }
                                }
                            }
                        }
                    });
                }
                
                console.log('✅ Gráfico de investimentos atualizado');
            } catch (error) {
                console.error('❌ Erro ao atualizar gráfico de investimentos:', error);
            }
        }
        
        // ==============================================
        // FUNÇÕES PRINCIPAIS
        // ==============================================
        
        function updateDashboard() {
            console.log('📊 Atualizando dashboard...');
            
            try {
                const clients = getClients();
                const products = getProducts();
                const sales = getSales();
                const financial = getFinancial();
                const investments = getInvestments();
                const subscriptions = getSubscriptions();
                
                // Atualizar estatísticas
                document.getElementById('totalClientes').textContent = clients.length;
                document.getElementById('totalProdutos').textContent = products.reduce((sum, p) => sum + p.stock, 0);
                
                const today = new Date().toISOString().split('T')[0];
                const todaySales = sales.filter(s => s.date === today);
                document.getElementById('vendasHoje').textContent = todaySales.length;
                
                const totalSales = sales.reduce((sum, s) => sum + s.total, 0);
                document.getElementById('totalVendas').textContent = totalSales.toLocaleString('pt-MZ', { minimumFractionDigits: 2 }) + ' MZN';
                
                // Atualizar estatísticas financeiras
                document.getElementById('currentBalance').textContent = financial.current_balance.toLocaleString('pt-MZ', { minimumFractionDigits: 2 }) + ' MZN';
                document.getElementById('monthlyIncome').textContent = financial.monthly_income.toLocaleString('pt-MZ', { minimumFractionDigits: 2 }) + ' MZN';
                document.getElementById('monthlyExpenses').textContent = financial.monthly_expenses.toLocaleString('pt-MZ', { minimumFractionDigits: 2 }) + ' MZN';
                document.getElementById('monthlyProfit').textContent = financial.monthly_profit.toLocaleString('pt-MZ', { minimumFractionDigits: 2 }) + ' MZN';
                
                // Atualizar estatísticas de investimentos
                document.getElementById('roiPercentage').textContent = investments.roi_percentage.toFixed(1) + '%';
                document.getElementById('growthRate').textContent = investments.growth_rate.toFixed(1) + '%';
                document.getElementById('totalInvestment').textContent = investments.total_invested.toLocaleString('pt-MZ', { minimumFractionDigits: 2 }) + ' MZN';
                document.getElementById('profitMargin').textContent = investments.profit_margin.toFixed(1) + '%';
                
                // Atualizar tabela de vendas recentes
                const recentSalesBody = document.getElementById('recentSalesBody');
                if (recentSalesBody) {
                    recentSalesBody.innerHTML = '';
                    
                    sales.slice(-5).reverse().forEach(sale => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${sale.receipt_no}</td>
                            <td>${sale.client_name || 'Cliente Avulso'}</td>
                            <td>${sale.date} ${sale.time || ''}</td>
                            <td>${sale.total.toFixed(2)} MZN</td>
                            <td><span class="badge badge-success">Concluída</span></td>
                            <td>
                                <button class="btn btn-sm btn-primary" onclick="viewSale(${sale.id})">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="deleteSale(${sale.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        `;
                        recentSalesBody.appendChild(row);
                    });
                }
                
                // Atualizar alertas de stock
                const stockAlertBody = document.getElementById('stockAlertBody');
                if (stockAlertBody) {
                    stockAlertBody.innerHTML = '';
                    
                    const lowStockProducts = products.filter(p => p.stock <= p.min_stock);
                    lowStockProducts.forEach(product => {
                        const status = product.stock === 0 ? 'badge-danger' : 'badge-warning';
                        const statusText = product.stock === 0 ? 'Esgotado' : 'Stock Baixo';
                        
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${product.name} (${product.code})</td>
                            <td>${product.category}</td>
                            <td>${product.stock}</td>
                            <td>${product.min_stock}</td>
                            <td><span class="badge ${status}">${statusText}</span></td>
                            <td>
                                <button class="btn btn-sm btn-warning" onclick="editProduct(${product.id})">
                                    <i class="fas fa-edit"></i> Repor Stock
                                </button>
                            </td>
                        `;
                        stockAlertBody.appendChild(row);
                    });
                }
                
                // Atualizar estatísticas de assinaturas no dashboard
                const activeSubscriptions = subscriptions.filter(s => s.status === 'active');
                if (document.getElementById('totalAssinaturas')) {
                    document.getElementById('totalAssinaturas').textContent = subscriptions.length;
                    document.getElementById('assinaturasAtivas').textContent = activeSubscriptions.length;
                    
                    const trialSubscriptions = subscriptions.filter(s => s.status === 'trial');
                    document.getElementById('assinaturasTrial').textContent = trialSubscriptions.length;
                    
                    const monthlyRevenue = subscriptions
                        .filter(s => s.status === 'active')
                        .reduce((sum, s) => sum + s.price, 0);
                    document.getElementById('receitaMensal').textContent = monthlyRevenue.toFixed(2) + ' MZN';
                }
                
                // Atualizar gráficos
                setTimeout(updateCharts, 100);
                
                console.log('✅ Dashboard atualizado');
            } catch (error) {
                console.error('❌ Erro ao atualizar dashboard:', error);
            }
        }
        
        function updateClientsTable() {
            console.log('👥 Atualizando tabela de clientes...');
            
            try {
                const clients = getClients();
                const clientsBody = document.getElementById('clientesBody');
                
                if (clientsBody) {
                    clientsBody.innerHTML = '';
                    
                    clients.forEach(client => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${client.id}</td>
                            <td>${client.name}</td>
                            <td>${client.phone}</td>
                            <td>${client.email || '-'}</td>
                            <td>
                                <span class="badge ${
                                    client.type === 'vip' ? 'badge-warning' :
                                    client.type === 'corporate' ? 'badge-primary' :
                                    client.type === 'wholesale' ? 'badge-info' : 'badge-success'
                                }">
                                    ${client.type === 'vip' ? 'VIP' :
                                      client.type === 'corporate' ? 'Corporativo' :
                                      client.type === 'wholesale' ? 'Atacado' : 'Regular'}
                                </span>
                            </td>
                            <td>${client.total_purchases.toFixed(2)} MZN</td>
                            <td>${client.last_purchase || '-'}</td>
                            <td>
                                <button class="btn btn-sm btn-primary" onclick="editClient(${client.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-info" onclick="viewClient(${client.id})">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="deleteClient(${client.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        `;
                        clientsBody.appendChild(row);
                    });
                    
                    // Atualizar contadores
                    document.getElementById('clientCount').textContent = clients.length;
                    document.getElementById('totalClients').textContent = clients.length;
                    
                    // Atualizar estatísticas
                    const vipClients = clients.filter(c => c.type === 'vip').length;
                    const activeClients = clients.filter(c => {
                        const lastPurchase = c.last_purchase ? new Date(c.last_purchase) : null;
                        if (!lastPurchase) return false;
                        const thirtyDaysAgo = new Date();
                        thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
                        return lastPurchase >= thirtyDaysAgo;
                    }).length;
                    
                    document.getElementById('totalClientesCount').textContent = clients.length;
                    document.getElementById('vipClientesCount').textContent = vipClients;
                    document.getElementById('clientesAtivosCount').textContent = activeClients;
                    document.getElementById('clientesInativosCount').textContent = clients.length - activeClients;
                }
                
                console.log('✅ Tabela de clientes atualizada');
            } catch (error) {
                console.error('❌ Erro ao atualizar tabela de clientes:', error);
            }
        }
        
        function updateProductsTable() {
            console.log('📦 Atualizando tabela de produtos...');
            
            try {
                const products = getProducts();
                const productsBody = document.getElementById('produtosBody');
                
                if (productsBody) {
                    productsBody.innerHTML = '';
                    
                    products.forEach(product => {
                        const status = product.stock === 0 ? 'badge-danger' :
                                      product.stock <= product.min_stock ? 'badge-warning' : 'badge-success';
                        const statusText = product.stock === 0 ? 'Esgotado' :
                                          product.stock <= product.min_stock ? 'Stock Baixo' : 'Em Stock';
                        
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${product.code}</td>
                            <td>${product.name}</td>
                            <td>${product.category}</td>
                            <td>${product.price.toFixed(2)} MZN</td>
                            <td>${product.cost ? product.cost.toFixed(2) + ' MZN' : '-'}</td>
                            <td>${product.stock}</td>
                            <td><span class="badge ${status}">${statusText}</span></td>
                            <td>
                                <button class="btn btn-sm btn-primary" onclick="editProduct(${product.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-info" onclick="viewProduct(${product.id})">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="deleteProduct(${product.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        `;
                        productsBody.appendChild(row);
                    });
                    
                    // Atualizar contadores
                    document.getElementById('productCount').textContent = products.length;
                    
                    // Atualizar estatísticas
                    const lowStockProducts = products.filter(p => p.stock <= p.min_stock && p.stock > 0).length;
                    const outOfStockProducts = products.filter(p => p.stock === 0).length;
                    const categories = [...new Set(products.map(p => p.category))];
                    
                    document.getElementById('totalProdutosCount').textContent = products.reduce((sum, p) => sum + p.stock, 0);
                    document.getElementById('produtosStockBaixo').textContent = lowStockProducts;
                    document.getElementById('produtosEsgotados').textContent = outOfStockProducts;
                    document.getElementById('totalCategorias').textContent = categories.length;
                }
                
                console.log('✅ Tabela de produtos atualizada');
            } catch (error) {
                console.error('❌ Erro ao atualizar tabela de produtos:', error);
            }
        }
        
        function updateSalesTable() {
            console.log('🛒 Atualizando tabela de vendas...');
            
            try {
                const sales = getSales();
                const salesBody = document.getElementById('vendasBody');
                
                if (salesBody) {
                    salesBody.innerHTML = '';
                    
                    sales.slice().reverse().forEach(sale => {
                        const itemCount = sale.items.reduce((sum, item) => sum + item.quantity, 0);
                        
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${sale.receipt_no}</td>
                            <td>${sale.client_name || 'Cliente Avulso'}</td>
                            <td>${sale.date} ${sale.time || ''}</td>
                            <td>${itemCount} itens</td>
                            <td>${sale.total.toFixed(2)} MZN</td>
                            <td>${sale.payment_method}</td>
                            <td><span class="badge badge-success">Concluída</span></td>
                            <td>
                                <button class="btn btn-sm btn-primary" onclick="viewSale(${sale.id})">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="deleteSale(${sale.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        `;
                        salesBody.appendChild(row);
                    });
                    
                    // Atualizar contadores
                    document.getElementById('saleCount').textContent = sales.length;
                    
                    // Atualizar estatísticas
                    const today = new Date().toISOString().split('T')[0];
                    const todaySales = sales.filter(s => s.date === today);
                    const thisWeekSales = sales.filter(s => {
                        const saleDate = new Date(s.date);
                        const today = new Date();
                        const startOfWeek = new Date(today);
                        startOfWeek.setDate(today.getDate() - today.getDay());
                        return saleDate >= startOfWeek;
                    });
                    const thisMonthSales = sales.filter(s => {
                        const saleDate = new Date(s.date);
                        const today = new Date();
                        return saleDate.getMonth() === today.getMonth() && 
                               saleDate.getFullYear() === today.getFullYear();
                    });
                    const monthlyRevenue = thisMonthSales.reduce((sum, s) => sum + s.total, 0);
                    
                    document.getElementById('vendasHojeCount').textContent = todaySales.length;
                    document.getElementById('vendasSemanaCount').textContent = thisWeekSales.length;
                    document.getElementById('vendasMesCount').textContent = thisMonthSales.length;
                    document.getElementById('faturamentoMes').textContent = monthlyRevenue.toLocaleString('pt-MZ', { minimumFractionDigits: 2 }) + ' MZN';
                }
                
                console.log('✅ Tabela de vendas atualizada');
            } catch (error) {
                console.error('❌ Erro ao atualizar tabela de vendas:', error);
            }
        }
        
        function updateFinancialData() {
            console.log('💰 Atualizando dados financeiros...');
            
            try {
                const financial = getFinancial();
                
                // Atualizar dados financeiros básicos
                document.getElementById('currentBalance').textContent = financial.current_balance.toLocaleString('pt-MZ', { minimumFractionDigits: 2 }) + ' MZN';
                document.getElementById('monthlyIncome').textContent = financial.monthly_income.toLocaleString('pt-MZ', { minimumFractionDigits: 2 }) + ' MZN';
                document.getElementById('monthlyExpenses').textContent = financial.monthly_expenses.toLocaleString('pt-MZ', { minimumFractionDigits: 2 }) + ' MZN';
                document.getElementById('monthlyProfit').textContent = financial.monthly_profit.toLocaleString('pt-MZ', { minimumFractionDigits: 2 }) + ' MZN';
                
                // Atualizar gráficos financeiros
                setTimeout(updateFinancialCharts, 100);
                
                console.log('✅ Dados financeiros atualizados');
            } catch (error) {
                console.error('❌ Erro ao atualizar dados financeiros:', error);
            }
        }
        
        function updateReportsData() {
            console.log('📊 Atualizando relatórios...');
            
            try {
                const sales = getSales();
                const products = getProducts();
                const clients = getClients();
                const subscriptions = getSubscriptions();
                
                // Atualizar estatísticas de relatórios
                const totalSalesValue = sales.reduce((sum, s) => sum + s.total, 0);
                const totalItemsSold = sales.reduce((sum, s) => 
                    sum + s.items.reduce((itemSum, item) => itemSum + item.quantity, 0), 0);
                const avgSale = sales.length > 0 ? totalSalesValue / sales.length : 0;
                
                // Encontrar produto mais vendido
                const productSales = {};
                sales.forEach(sale => {
                    sale.items.forEach(item => {
                        if (!productSales[item.name]) {
                            productSales[item.name] = 0;
                        }
                        productSales[item.name] += item.quantity;
                    });
                });
                
                let topProduct = '-';
                let maxSales = 0;
                Object.entries(productSales).forEach(([product, quantity]) => {
                    if (quantity > maxSales) {
                        maxSales = quantity;
                        topProduct = product;
                    }
                });
                
                document.getElementById('reportTotalSales').textContent = totalSalesValue.toLocaleString('pt-MZ', { minimumFractionDigits: 2 }) + ' MZN';
                document.getElementById('reportTotalItems').textContent = totalItemsSold;
                document.getElementById('reportAvgSale').textContent = avgSale.toLocaleString('pt-MZ', { minimumFractionDigits: 2 }) + ' MZN';
                document.getElementById('reportTopProduct').textContent = topProduct;
                
                // Atualizar gráficos de relatórios
                setTimeout(updateReportCharts, 100);
                
                console.log('✅ Relatórios atualizados');
            } catch (error) {
                console.error('❌ Erro ao atualizar relatórios:', error);
            }
        }
        
        function updateInvestmentsData() {
            console.log('📈 Atualizando dados de investimentos...');
            
            try {
                const investments = getInvestments();
                
                // Atualizar estatísticas de investimentos
                document.getElementById('roiPercentage').textContent = investments.roi_percentage.toFixed(1) + '%';
                document.getElementById('growthRate').textContent = investments.growth_rate.toFixed(1) + '%';
                document.getElementById('totalInvestment').textContent = investments.total_invested.toLocaleString('pt-MZ', { minimumFractionDigits: 2 }) + ' MZN';
                document.getElementById('profitMargin').textContent = investments.profit_margin.toFixed(1) + '%';
                
                // Atualizar gráfico de investimentos
                setTimeout(updateInvestmentChart, 100);
                
                console.log('✅ Dados de investimentos atualizados');
            } catch (error) {
                console.error('❌ Erro ao atualizar dados de investimentos:', error);
            }
        }
        
        function updatePlansData() {
            console.log('👑 Atualizando dados de planos...');
            
            try {
                const plans = getPlans();
                const plansGrid = document.getElementById('plansGrid');
                
                if (plansGrid) {
                    plansGrid.innerHTML = '';
                    
                    plans.forEach(plan => {
                        const planCard = document.createElement('div');
                        planCard.className = `plan-card ${plan.is_popular ? 'popular' : ''}`;
                        
                        const featuresList = plan.features.map(feature => {
                            const featureNames = {
                                'dashboard': 'Dashboard completo',
                                'clientes': 'Gestão de clientes',
                                'produtos': 'Gestão de produtos',
                                'vendas': 'Gestão de vendas',
                                'relatorios_basicos': 'Relatórios básicos',
                                'relatorios_avancados': 'Relatórios avançados',
                                'exportar': 'Exportação de dados',
                                'importar': 'Importação de dados',
                                'suporte_prioritario': 'Suporte prioritário',
                                'api_access': 'Acesso à API'
                            };
                            return `<li><i class="fas fa-check"></i> ${featureNames[feature] || feature}</li>`;
                        }).join('');
                        
                        planCard.innerHTML = `
                            ${plan.is_popular ? '<div class="plan-badge">Mais Popular</div>' : ''}
                            <h3>${plan.name}</h3>
                            <p>${plan.description}</p>
                            <div class="plan-price">${plan.price.toFixed(2)} MZN <span>/mês</span></div>
                            <ul class="plan-features">
                                ${featuresList}
                            </ul>
                            <button class="btn btn-primary" style="width: 100%;" onclick="selectPlan(${plan.id})">
                                <i class="fas fa-shopping-cart"></i> Selecionar Plano
                            </button>
                        `;
                        
                        plansGrid.appendChild(planCard);
                    });
                }
                
                console.log('✅ Dados de planos atualizados');
            } catch (error) {
                console.error('❌ Erro ao atualizar dados de planos:', error);
            }
        }
        
        function updateSubscriptionsTable() {
            console.log('📝 Atualizando tabela de assinaturas...');
            
            try {
                const subscriptions = getSubscriptions();
                const subscriptionsBody = document.getElementById('assinaturasBody');
                
                if (subscriptionsBody) {
                    subscriptionsBody.innerHTML = '';
                    
                    subscriptions.forEach(subscription => {
                        const statusClass = subscription.status === 'active' ? 'status-active' :
                                          subscription.status === 'trial' ? 'status-trial' :
                                          subscription.status === 'pending' ? 'status-pending' :
                                          subscription.status === 'expired' ? 'status-expired' : 'status-pending';
                        const statusText = subscription.status === 'active' ? 'Ativa' :
                                         subscription.status === 'trial' ? 'Em Teste' :
                                         subscription.status === 'pending' ? 'Pendente' :
                                         subscription.status === 'expired' ? 'Expirada' : 'Cancelada';
                        
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${subscription.client_name}</td>
                            <td>${subscription.plan_name}</td>
                            <td>${subscription.start_date}</td>
                            <td>${subscription.end_date || '-'}</td>
                            <td>${subscription.next_payment || '-'}</td>
                            <td>${subscription.price.toFixed(2)} MZN</td>
                            <td><span class="subscription-status ${statusClass}">${statusText}</span></td>
                            <td>
                                <button class="btn btn-sm btn-primary" onclick="viewSubscription(${subscription.id})">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="cancelSubscription(${subscription.id})">
                                    <i class="fas fa-times"></i>
                                </button>
                            </td>
                        `;
                        subscriptionsBody.appendChild(row);
                    });
                    
                    // Atualizar contadores
                    document.getElementById('subscriptionCount').textContent = subscriptions.length;
                    
                    // Atualizar estatísticas
                    const activeSubscriptions = subscriptions.filter(s => s.status === 'active').length;
                    const trialSubscriptions = subscriptions.filter(s => s.status === 'trial').length;
                    const monthlyRevenue = subscriptions
                        .filter(s => s.status === 'active')
                        .reduce((sum, s) => sum + s.price, 0);
                    
                    document.getElementById('totalAssinaturas').textContent = subscriptions.length;
                    document.getElementById('assinaturasAtivas').textContent = activeSubscriptions;
                    document.getElementById('assinaturasTrial').textContent = trialSubscriptions;
                    document.getElementById('receitaMensal').textContent = monthlyRevenue.toLocaleString('pt-MZ', { minimumFractionDigits: 2 }) + ' MZN';
                }
                
                console.log('✅ Tabela de assinaturas atualizada');
            } catch (error) {
                console.error('❌ Erro ao atualizar tabela de assinaturas:', error);
            }
        }
        
        function updateStockData() {
            console.log('📦 Atualizando dados de stock...');
            
            try {
                const products = getProducts();
                const stockMovements = getStockMovements();
                
                // Atualizar movimentações recentes
                const stockMovementsBody = document.getElementById('stockMovementsBody');
                if (stockMovementsBody) {
                    stockMovementsBody.innerHTML = '';
                    
                    stockMovements.slice(-10).reverse().forEach(movement => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${movement.date}</td>
                            <td>${movement.product_name}</td>
                            <td>
                                <span class="badge ${movement.type === 'entrada' ? 'badge-success' : 'badge-danger'}">
                                    ${movement.type === 'entrada' ? 'Entrada' : 'Saída'}
                                </span>
                            </td>
                            <td>${movement.quantity}</td>
                            <td>${movement.responsible}</td>
                        `;
                        stockMovementsBody.appendChild(row);
                    });
                }
                
                // Atualizar avisos de stock
                const stockWarningsList = document.getElementById('stockWarningsList');
                if (stockWarningsList) {
                    stockWarningsList.innerHTML = '';
                    
                    const lowStockProducts = products.filter(p => p.stock <= p.min_stock);
                    
                    if (lowStockProducts.length === 0) {
                        stockWarningsList.innerHTML = `
                            <div style="padding: 15px; background: #d4edda; border-radius: 8px; color: #155724;">
                                <i class="fas fa-check-circle"></i> Todos os produtos têm stock suficiente.
                            </div>
                        `;
                    } else {
                        lowStockProducts.forEach(product => {
                            const warning = document.createElement('div');
                            warning.style.cssText = 'padding: 12px; background: #fff3cd; border-radius: 8px; margin-bottom: 10px; color: #856404;';
                            warning.innerHTML = `
                                <div style="font-weight: 600; margin-bottom: 5px;">
                                    <i class="fas fa-exclamation-triangle"></i> ${product.name}
                                </div>
                                <div style="font-size: 0.9rem;">
                                    Stock: ${product.stock} | Mínimo: ${product.min_stock}
                                </div>
                            `;
                            stockWarningsList.appendChild(warning);
                        });
                    }
                }
                
                // Atualizar relatório de stock
                const stockReportBody = document.getElementById('stockReportBody');
                if (stockReportBody) {
                    stockReportBody.innerHTML = '';
                    
                    products.forEach(product => {
                        const status = product.stock === 0 ? 'badge-danger' :
                                      product.stock <= product.min_stock ? 'badge-warning' : 'badge-success';
                        const statusText = product.stock === 0 ? 'Esgotado' :
                                          product.stock <= product.min_stock ? 'Stock Baixo' : 'Normal';
                        const stockValue = product.stock * (product.cost || product.price);
                        
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${product.code}</td>
                            <td>${product.name}</td>
                            <td>${product.category}</td>
                            <td>${product.stock}</td>
                            <td>${product.min_stock}</td>
                            <td>${Math.ceil(product.min_stock * 2)}</td>
                            <td>${stockValue.toFixed(2)} MZN</td>
                            <td><span class="badge ${status}">${statusText}</span></td>
                        `;
                        stockReportBody.appendChild(row);
                    });
                }
                
                console.log('✅ Dados de stock atualizados');
            } catch (error) {
                console.error('❌ Erro ao atualizar dados de stock:', error);
            }
        }
        
        function updateSuppliersTable() {
            console.log('🚚 Atualizando tabela de fornecedores...');
            
            try {
                const suppliers = getSuppliers();
                const suppliersBody = document.getElementById('fornecedoresBody');
                
                if (suppliersBody) {
                    suppliersBody.innerHTML = '';
                    
                    suppliers.forEach(supplier => {
                        const ratingStars = '★'.repeat(Math.floor(supplier.rating)) + '☆'.repeat(5 - Math.floor(supplier.rating));
                        
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${supplier.name}</td>
                            <td>${supplier.contact}</td>
                            <td>${supplier.products.join(', ')}</td>
                            <td>${supplier.last_delivery}</td>
                            <td>
                                <span style="color: #f39c12;">${ratingStars}</span>
                                <span style="font-size: 0.85rem; color: #666;"> (${supplier.rating})</span>
                            </td>
                            <td>
                                <button class="btn btn-sm btn-primary" onclick="editSupplier(${supplier.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="deleteSupplier(${supplier.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        `;
                        suppliersBody.appendChild(row);
                    });
                }
                
                console.log('✅ Tabela de fornecedores atualizada');
            } catch (error) {
                console.error('❌ Erro ao atualizar tabela de fornecedores:', error);
            }
        }
        
        function updateTeamTable() {
            console.log('👥 Atualizando tabela da equipa...');
            
            try {
                const team = getTeam();
                const teamBody = document.getElementById('equipaBody');
                
                if (teamBody) {
                    teamBody.innerHTML = '';
                    
                    team.forEach(member => {
                        const statusClass = member.status === 'active' ? 'badge-success' : 'badge-danger';
                        const statusText = member.status === 'active' ? 'Ativo' : 'Inativo';
                        
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${member.name}</td>
                            <td>${member.role}</td>
                            <td>${member.contact}</td>
                            <td>${member.join_date}</td>
                            <td>${member.sales.toFixed(2)} MZN</td>
                            <td><span class="badge ${statusClass}">${statusText}</span></td>
                            <td>
                                <button class="btn btn-sm btn-primary" onclick="editTeamMember(${member.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="deleteTeamMember(${member.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        `;
                        teamBody.appendChild(row);
                    });
                    
                    // Atualizar estatísticas
                    document.getElementById('totalMembros').textContent = team.length;
                    document.getElementById('membrosAtivos').textContent = team.filter(m => m.status === 'active').length;
                    
                    const totalSales = team.reduce((sum, m) => sum + m.sales, 0);
                    document.getElementById('vendasEquipa').textContent = totalSales.toLocaleString('pt-MZ', { minimumFractionDigits: 2 }) + ' MZN';
                    
                    const topSeller = team.reduce((max, m) => m.sales > max.sales ? m : max, team[0] || { name: '-' });
                    document.getElementById('topVendedor').textContent = topSeller.name;
                }
                
                console.log('✅ Tabela da equipa atualizada');
            } catch (error) {
                console.error('❌ Erro ao atualizar tabela da equipa:', error);
            }
        }
        
        function loadSettings() {
            console.log('⚙️ Carregando configurações...');
            
            try {
                const settings = getSettings();
                const subscriptionSettings = getSubscriptionSettings();
                
                // Carregar configurações da empresa
                document.getElementById('companyName').value = settings.company_name || '';
                document.getElementById('companyNIF').value = settings.company_nif || '';
                document.getElementById('companyAddress').value = settings.company_address || '';
                document.getElementById('companyPhone').value = settings.company_phone || '';
                document.getElementById('companyEmail').value = settings.company_email || '';
                
                // Carregar configurações de faturação
                document.getElementById('invoicePrefix').value = settings.invoice_prefix || 'FAT';
                document.getElementById('invoiceStartNumber').value = settings.invoice_start_number || 1001;
                document.getElementById('invoiceFooter').value = settings.invoice_footer || 'Obrigado pela sua preferência!';
                document.getElementById('autoPrintInvoice').checked = settings.auto_print_invoice !== false;
                
                // Carregar configurações gerais
                document.getElementById('currency').value = settings.currency || 'MZN';
                document.getElementById('taxRate').value = settings.tax_rate || 17;
                document.getElementById('lowStockThreshold').value = settings.low_stock_threshold || 10;
                document.getElementById('timezone').value = settings.timezone || 'Africa/Maputo';
                
                // Carregar notificações e alertas
                document.getElementById('enableStockAlerts').checked = settings.enable_stock_alerts !== false;
                document.getElementById('enableSalesReports').checked = settings.enable_sales_reports !== false;
                document.getElementById('enableClientBirthdayAlerts').checked = settings.enable_client_birthday_alerts !== false;
                document.getElementById('enableAutoBackup').checked = settings.enable_auto_backup !== false;
                document.getElementById('backupFrequency').value = settings.backup_frequency || 'weekly';
                
                // Carregar configurações de assinatura
                document.getElementById('subscriptionCurrency').value = subscriptionSettings.currency || 'MZN';
                document.getElementById('trialPeriodDays').value = subscriptionSettings.trial_period_days || 7;
                document.getElementById('gracePeriodDays').value = subscriptionSettings.grace_period_days || 3;
                document.getElementById('autoRenewal').value = subscriptionSettings.auto_renewal || 'enabled';
                document.getElementById('invoiceDaysBefore').value = subscriptionSettings.invoice_days_before || 7;
                document.getElementById('reminderDays').value = subscriptionSettings.reminder_days ? subscriptionSettings.reminder_days.join(',') : '7,3,1';
                
                // Carregar métodos de pagamento
                const paymentMethods = subscriptionSettings.payment_methods || ['Multicaixa', 'M-Pesa', 'E-Mola', 'Transferência'];
                document.getElementById('paymentMulticaixa').checked = paymentMethods.includes('Multicaixa');
                document.getElementById('paymentMPesa').checked = paymentMethods.includes('M-Pesa');
                document.getElementById('paymentEMola').checked = paymentMethods.includes('E-Mola');
                document.getElementById('paymentTransfer').checked = paymentMethods.includes('Transferência');
                document.getElementById('paymentCard').checked = paymentMethods.includes('Cartão');
                
                // Carregar notificações de assinatura
                document.getElementById('notifyTrialEnd').checked = subscriptionSettings.notify_trial_end !== false;
                document.getElementById('notifyBeforeRenewal').checked = subscriptionSettings.notify_before_renewal !== false;
                document.getElementById('notifyPaymentFailed').checked = subscriptionSettings.notify_payment_failed !== false;
                document.getElementById('notifySubscriptionEnd').checked = subscriptionSettings.notify_subscription_end !== false;
                document.getElementById('notifyAutoRenewal').checked = subscriptionSettings.notify_auto_renewal !== false;
                document.getElementById('sendWelcomeEmail').checked = subscriptionSettings.send_welcome_email !== false;
                
                console.log('✅ Configurações carregadas');
            } catch (error) {
                console.error('❌ Erro ao carregar configurações:', error);
            }
        }
        
        // ==============================================
        // FUNÇÕES DE OPERAÇÕES CRUD
        // ==============================================
        
        function addNewClient(formData) {
            try {
                const clients = getClients();
                const nextId = getNextId('client');
                
                const newClient = {
                    id: nextId,
                    name: formData.name,
                    phone: formData.phone,
                    email: formData.email || '',
                    nif: formData.nif || '',
                    address: formData.address || '',
                    type: formData.type || 'regular',
                    notes: formData.notes || '',
                    total_purchases: 0,
                    last_purchase: null,
                    created_at: new Date().toISOString().split('T')[0]
                };
                
                clients.push(newClient);
                saveClients(clients);
                saveNextId('client', nextId + 1);
                
                showNotification('Cliente adicionado com sucesso!', 'success');
                closeModal('addClientModal');
                updateClientsTable();
                
                // Limpar formulário
                document.getElementById('addClientForm').reset();
                
                return true;
            } catch (error) {
                console.error('❌ Erro ao adicionar cliente:', error);
                showNotification('Erro ao adicionar cliente: ' + error.message, 'error');
                return false;
            }
        }
        
        function addNewProduct(formData) {
            try {
                const products = getProducts();
                const nextId = getNextId('product');
                
                const newProduct = {
                    id: nextId,
                    code: formData.code,
                    name: formData.name,
                    category: formData.category || 'Geral',
                    price: parseFloat(formData.price),
                    cost: formData.cost ? parseFloat(formData.cost) : null,
                    stock: parseInt(formData.stock) || 0,
                    min_stock: parseInt(formData.min_stock) || 10,
                    barcode: formData.barcode || '',
                    supplier: formData.supplier || '',
                    description: formData.description || ''
                };
                
                products.push(newProduct);
                saveProducts(products);
                saveNextId('product', nextId + 1);
                
                showNotification('Produto adicionado com sucesso!', 'success');
                closeModal('addProductModal');
                updateProductsTable();
                
                // Limpar formulário
                document.getElementById('addProductForm').reset();
                
                return true;
            } catch (error) {
                console.error('❌ Erro ao adicionar produto:', error);
                showNotification('Erro ao adicionar produto: ' + error.message, 'error');
                return false;
            }
        }
        
        function addNewSale(saleData) {
            try {
                const sales = getSales();
                const nextId = getNextId('sale');
                
                // Gerar número de recibo
                const receiptNo = 'REC' + String(nextId).padStart(3, '0');
                
                const newSale = {
                    id: nextId,
                    receipt_no: receiptNo,
                    client_id: saleData.client_id || null,
                    client_name: saleData.client_name || 'Cliente Avulso',
                    items: saleData.items,
                    subtotal: saleData.subtotal,
                    discount: saleData.discount || 0,
                    tax: saleData.tax,
                    total: saleData.total,
                    payment_method: saleData.payment_method,
                    amount_received: saleData.amount_received,
                    change: saleData.change,
                    date: new Date().toISOString().split('T')[0],
                    time: new Date().toLocaleTimeString('pt-MZ', { hour: '2-digit', minute: '2-digit' }),
                    seller: 'Administrador'
                };
                
                // Atualizar stock dos produtos
                const products = getProducts();
                saleData.items.forEach(item => {
                    const product = products.find(p => p.id === item.product_id);
                    if (product) {
                        product.stock -= item.quantity;
                        if (product.stock < 0) product.stock = 0;
                    }
                });
                saveProducts(products);
                
                // Adicionar movimento de stock
                const stockMovements = getStockMovements();
                const nextMovementId = getNextId('stock_movement');
                
                saleData.items.forEach(item => {
                    const product = products.find(p => p.id === item.product_id);
                    if (product) {
                        stockMovements.push({
                            id: nextMovementId,
                            product_id: item.product_id,
                            product_name: product.name,
                            type: 'saida',
                            quantity: item.quantity,
                            reason: 'venda',
                            client_id: saleData.client_id,
                            client_name: saleData.client_name,
                            date: new Date().toISOString().split('T')[0],
                            responsible: 'Administrador',
                            notes: `Venda ${receiptNo}`
                        });
                    }
                });
                saveStockMovements(stockMovements);
                saveNextId('stock_movement', nextMovementId + saleData.items.length);
                
                // Adicionar venda
                sales.push(newSale);
                saveSales(sales);
                saveNextId('sale', nextId + 1);
                
                // Atualizar cliente (se houver)
                if (saleData.client_id) {
                    const clients = getClients();
                    const client = clients.find(c => c.id === saleData.client_id);
                    if (client) {
                        client.total_purchases = (client.total_purchases || 0) + saleData.total;
                        client.last_purchase = new Date().toISOString().split('T')[0];
                        saveClients(clients);
                    }
                }
                
                showNotification(`Venda ${receiptNo} registrada com sucesso! Troco: ${saleData.change.toFixed(2)} MZN`, 'success');
                closeModal('newSaleModal');
                updateDashboard();
                updateSalesTable();
                
                return true;
            } catch (error) {
                console.error('❌ Erro ao adicionar venda:', error);
                showNotification('Erro ao registrar venda: ' + error.message, 'error');
                return false;
            }
        }
        
        function viewSale(saleId) {
            try {
                const sales = getSales();
                const sale = sales.find(s => s.id === saleId);
                
                if (!sale) {
                    showNotification('Venda não encontrada!', 'error');
                    return;
                }
                
                const saleDetailsContent = document.getElementById('saleDetailsContent');
                if (saleDetailsContent) {
                    // Formatar itens da venda
                    const itemsHtml = sale.items.map(item => `
                        <tr>
                            <td>${item.name}</td>
                            <td>${item.quantity}</td>
                            <td>${item.price.toFixed(2)} MZN</td>
                            <td>${item.total.toFixed(2)} MZN</td>
                        </tr>
                    `).join('');
                    
                    saleDetailsContent.innerHTML = `
                        <div style="padding: 20px;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                                <div>
                                    <h3 style="margin-bottom: 15px; color: var(--bizzflow-primary);">Informações da Venda</h3>
                                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span><strong>Recibo Nº:</strong></span>
                                            <span>${sale.receipt_no}</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span><strong>Data:</strong></span>
                                            <span>${sale.date} ${sale.time}</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span><strong>Cliente:</strong></span>
                                            <span>${sale.client_name}</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span><strong>Vendedor:</strong></span>
                                            <span>${sale.seller}</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span><strong>Forma de Pagamento:</strong></span>
                                            <span>${sale.payment_method}</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <h3 style="margin-bottom: 15px; color: var(--bizzflow-primary);">Resumo Financeiro</h3>
                                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span>Subtotal:</span>
                                            <span>${sale.subtotal.toFixed(2)} MZN</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span>Desconto:</span>
                                            <span>${sale.discount.toFixed(2)} MZN</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span>IVA (17%):</span>
                                            <span>${sale.tax.toFixed(2)} MZN</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; font-weight: bold; padding-top: 10px; border-top: 1px solid #ddd;">
                                            <span>Total:</span>
                                            <span>${sale.total.toFixed(2)} MZN</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                                            <span>Valor Recebido:</span>
                                            <span>${sale.amount_received.toFixed(2)} MZN</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; font-weight: bold; margin-top: 10px; color: #27ae60;">
                                            <span>Troco:</span>
                                            <span>${sale.change.toFixed(2)} MZN</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <h3 style="margin-bottom: 15px; color: var(--bizzflow-primary);">Itens da Venda</h3>
                            <div class="table-container">
                                <table style="width: 100%;">
                                    <thead>
                                        <tr>
                                            <th>Produto</th>
                                            <th>Quantidade</th>
                                            <th>Preço Unitário</th>
                                            <th>Total</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${itemsHtml}
                                    </tbody>
                                </table>
                            </div>
                            
                            <div style="text-align: center; margin-top: 30px;">
                                <button class="btn btn-primary" onclick="printSale(${saleId})">
                                    <i class="fas fa-print"></i> Imprimir Recibo
                                </button>
                                <button class="btn btn-danger" onclick="closeModal('viewSaleModal')" style="margin-left: 10px;">
                                    <i class="fas fa-times"></i> Fechar
                                </button>
                            </div>
                        </div>
                    `;
                    
                    openModal('viewSaleModal');
                }
            } catch (error) {
                console.error('❌ Erro ao visualizar venda:', error);
                showNotification('Erro ao visualizar venda: ' + error.message, 'error');
            }
        }
        
        function deleteSale(saleId) {
            if (confirm('Tem certeza que deseja excluir esta venda? Esta ação não pode ser desfeita.')) {
                try {
                    const sales = getSales();
                    const saleIndex = sales.findIndex(s => s.id === saleId);
                    
                    if (saleIndex === -1) {
                        showNotification('Venda não encontrada!', 'error');
                        return;
                    }
                    
                    // Reverter stock (se necessário)
                    const sale = sales[saleIndex];
                    const products = getProducts();
                    
                    sale.items.forEach(item => {
                        const product = products.find(p => p.id === item.product_id);
                        if (product) {
                            product.stock += item.quantity;
                        }
                    });
                    saveProducts(products);
                    
                    // Remover venda
                    sales.splice(saleIndex, 1);
                    saveSales(sales);
                    
                    showNotification('Venda excluída com sucesso!', 'success');
                    updateDashboard();
                    updateSalesTable();
                } catch (error) {
                    console.error('❌ Erro ao excluir venda:', error);
                    showNotification('Erro ao excluir venda: ' + error.message, 'error');
                }
            }
        }
        
        function editClient(clientId) {
            showNotification('Funcionalidade de edição de cliente em desenvolvimento!', 'info');
        }
        
        function viewClient(clientId) {
            showNotification('Funcionalidade de visualização de cliente em desenvolvimento!', 'info');
        }
        
        function deleteClient(clientId) {
            if (confirm('Tem certeza que deseja excluir este cliente? Esta ação não pode ser desfeita.')) {
                try {
                    const clients = getClients();
                    const clientIndex = clients.findIndex(c => c.id === clientId);
                    
                    if (clientIndex === -1) {
                        showNotification('Cliente não encontrado!', 'error');
                        return;
                    }
                    
                    clients.splice(clientIndex, 1);
                    saveClients(clients);
                    
                    showNotification('Cliente excluído com sucesso!', 'success');
                    updateClientsTable();
                } catch (error) {
                    console.error('❌ Erro ao excluir cliente:', error);
                    showNotification('Erro ao excluir cliente: ' + error.message, 'error');
                }
            }
        }
        
        function editProduct(productId) {
            showNotification('Funcionalidade de edição de produto em desenvolvimento!', 'info');
        }
        
        function viewProduct(productId) {
            showNotification('Funcionalidade de visualização de produto em desenvolvimento!', 'info');
        }
        
        function deleteProduct(productId) {
            if (confirm('Tem certeza que deseja excluir este produto? Esta ação não pode ser desfeita.')) {
                try {
                    const products = getProducts();
                    const productIndex = products.findIndex(p => p.id === productId);
                    
                    if (productIndex === -1) {
                        showNotification('Produto não encontrado!', 'error');
                        return;
                    }
                    
                    products.splice(productIndex, 1);
                    saveProducts(products);
                    
                    showNotification('Produto excluído com sucesso!', 'success');
                    updateProductsTable();
                } catch (error) {
                    console.error('❌ Erro ao excluir produto:', error);
                    showNotification('Erro ao excluir produto: ' + error.message, 'error');
                }
            }
        }
        
        function editSupplier(supplierId) {
            showNotification('Funcionalidade de edição de fornecedor em desenvolvimento!', 'info');
        }
        
        function deleteSupplier(supplierId) {
            if (confirm('Tem certeza que deseja excluir este fornecedor? Esta ação não pode ser desfeita.')) {
                try {
                    const suppliers = getSuppliers();
                    const supplierIndex = suppliers.findIndex(s => s.id === supplierId);
                    
                    if (supplierIndex === -1) {
                        showNotification('Fornecedor não encontrado!', 'error');
                        return;
                    }
                    
                    suppliers.splice(supplierIndex, 1);
                    saveSuppliers(suppliers);
                    
                    showNotification('Fornecedor excluído com sucesso!', 'success');
                    updateSuppliersTable();
                } catch (error) {
                    console.error('❌ Erro ao excluir fornecedor:', error);
                    showNotification('Erro ao excluir fornecedor: ' + error.message, 'error');
                }
            }
        }
        
        function editTeamMember(memberId) {
            showNotification('Funcionalidade de edição de membro da equipa em desenvolvimento!', 'info');
        }
        
        function deleteTeamMember(memberId) {
            if (confirm('Tem certeza que deseja excluir este membro da equipa? Esta ação não pode ser desfeita.')) {
                try {
                    const team = getTeam();
                    const memberIndex = team.findIndex(m => m.id === memberId);
                    
                    if (memberIndex === -1) {
                        showNotification('Membro da equipa não encontrado!', 'error');
                        return;
                    }
                    
                    team.splice(memberIndex, 1);
                    saveTeam(team);
                    
                    showNotification('Membro da equipa excluído com sucesso!', 'success');
                    updateTeamTable();
                } catch (error) {
                    console.error('❌ Erro ao excluir membro da equipa:', error);
                    showNotification('Erro ao excluir membro da equipa: ' + error.message, 'error');
                }
            }
        }
        
        function viewSubscription(subscriptionId) {
            showNotification('Funcionalidade de visualização de assinatura em desenvolvimento!', 'info');
        }
        
        function cancelSubscription(subscriptionId) {
            if (confirm('Tem certeza que deseja cancelar esta assinatura?')) {
                try {
                    const subscriptions = getSubscriptions();
                    const subscription = subscriptions.find(s => s.id === subscriptionId);
                    
                    if (!subscription) {
                        showNotification('Assinatura não encontrada!', 'error');
                        return;
                    }
                    
                    subscription.status = 'cancelled';
                    saveSubscriptions(subscriptions);
                    
                    showNotification('Assinatura cancelada com sucesso!', 'success');
                    updateSubscriptionsTable();
                } catch (error) {
                    console.error('❌ Erro ao cancelar assinatura:', error);
                    showNotification('Erro ao cancelar assinatura: ' + error.message, 'error');
                }
            }
        }
        
        function selectPlan(planId) {
            showNotification(`Plano ${planId} selecionado! Em uma aplicação real, isto redirecionaria para o checkout.`, 'info');
        }
        
        function printSale(saleId) {
            showNotification('Funcionalidade de impressão em desenvolvimento!', 'info');
        }
        
        // ==============================================
        // FUNÇÕES DE EXPORTAÇÃO/IMPORTAÇÃO
        // ==============================================
        
        function exportData(type, format) {
            let data, filename;
            
            switch(type) {
                case 'clientes':
                    data = getClients();
                    filename = `clientes_${new Date().toISOString().split('T')[0]}`;
                    break;
                case 'produtos':
                    data = getProducts();
                    filename = `produtos_${new Date().toISOString().split('T')[0]}`;
                    break;
                case 'vendas':
                    data = getSales();
                    filename = `vendas_${new Date().toISOString().split('T')[0]}`;
                    break;
                case 'assinaturas':
                    data = getSubscriptions();
                    filename = `assinaturas_${new Date().toISOString().split('T')[0]}`;
                    break;
                case 'all':
                    data = {
                        clientes: getClients(),
                        produtos: getProducts(),
                        vendas: getSales(),
                        fornecedores: getSuppliers(),
                        assinaturas: getSubscriptions(),
                        equipa: getTeam(),
                        planos: getPlans(),
                        configuracoes: getSettings()
                    };
                    filename = `backup_completo_${new Date().toISOString().split('T')[0]}`;
                    break;
                default:
                    showNotification('Tipo de exportação não suportado!', 'error');
                    return;
            }
            
            let content, mimeType, extension;
            
            if (format === 'csv') {
                content = convertToCSV(data, type);
                mimeType = 'text/csv;charset=utf-8;';
                extension = 'csv';
            } else if (format === 'excel') {
                // Para simplificar, usaremos CSV como Excel
                content = convertToCSV(data, type);
                mimeType = 'application/vnd.ms-excel;charset=utf-8;';
                extension = 'xls';
            } else if (format === 'pdf') {
                showNotification('Exportação para PDF em desenvolvimento!', 'info');
                return;
            } else {
                showNotification('Formato de exportação não suportado!', 'error');
                return;
            }
            
            // Criar e baixar arquivo
            const blob = new Blob([content], { type: mimeType });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            
            link.setAttribute('href', url);
            link.setAttribute('download', `${filename}.${extension}`);
            link.style.visibility = 'hidden';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification(`Exportação ${type} em ${format} realizada com sucesso!`, 'success');
        }
        
        function convertToCSV(data, type) {
            if (type === 'all') {
                // Para backup completo, criar múltiplos CSVs em um arquivo ZIP seria ideal
                // Por simplicidade, vamos exportar apenas clientes
                data = data.clientes;
                type = 'clientes';
            }
            
            if (!Array.isArray(data) || data.length === 0) {
                return 'No data available';
            }
            
            // Obter cabeçalhos
            const headers = Object.keys(data[0]);
            
            // Criar linhas CSV
            const rows = data.map(row => {
                return headers.map(header => {
                    const cell = row[header];
                    // Escapar vírgulas e aspas
                    if (typeof cell === 'string' && (cell.includes(',') || cell.includes('"'))) {
                        return `"${cell.replace(/"/g, '""')}"`;
                    }
                    return cell;
                }).join(',');
            });
            
            return [headers.join(','), ...rows].join('\n');
        }
        
        function exportReportData(format) {
            showNotification(`Exportação de relatório em ${format} em desenvolvimento!`, 'info');
        }
        
        function exportStockData(format) {
            exportData('produtos', format);
        }
        
        function showExportOptions() {
            const exportOptions = document.getElementById('exportOptions');
            if (exportOptions) {
                exportOptions.style.display = exportOptions.style.display === 'none' ? 'block' : 'none';
            }
        }
        
        function showImportTemplate(type) {
            showNotification(`Template de importação para ${type} em desenvolvimento!`, 'info');
        }
        
        function downloadTemplate(type) {
            showNotification(`Download de template para ${type} em desenvolvimento!`, 'info');
        }
        
        function downloadReport(type) {
            showNotification(`Download de relatório ${type} em desenvolvimento!`, 'info');
        }
        
        function generateCustomReport() {
            showNotification('Geração de relatório personalizado em desenvolvimento!', 'info');
        }
        
        // ==============================================
        // INICIALIZAÇÃO
        // ==============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🏁 DOM carregado, inicializando aplicação...');
            
            // Inicializar dados
            initializeData();
            
            // Definir data atual
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('pt-MZ', options);
            
            // Adicionar estilos CSS para notificações se não existirem
            if (!document.querySelector('#notification-styles')) {
                const style = document.createElement('style');
                style.id = 'notification-styles';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                    .notification-content {
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                    }
                    .notification-icon {
                        margin-right: 10px;
                        font-size: 18px;
                    }
                    .notification-text {
                        flex: 1;
                        font-size: 14px;
                        line-height: 1.4;
                    }
                    .notification-close {
                        background: none;
                        border: none;
                        color: white;
                        font-size: 20px;
                        cursor: pointer;
                        margin-left: 10px;
                        padding: 0;
                        width: 24px;
                        height: 24px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        border-radius: 50%;
                        transition: background-color 0.2s;
                    }
                    .notification-close:hover {
                        background: rgba(255,255,255,0.2);
                    }
                `;
                document.head.appendChild(style);
            }
            
            // Configurar evento de login
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const username = document.getElementById('username').value;
                    const password = document.getElementById('password').value;
                    
                    // Autenticação simples
                    const validCredentials = [
                        {user: 'admin', pass: 'admin123', name: 'Administrador', role: 'Super Admin'},
                        {user: 'manager', pass: 'manager123', name: 'Gestor', role: 'Gestor'},
                        {user: 'seller', pass: 'seller123', name: 'Vendedor', role: 'Vendedor'}
                    ];
                    
                    const user = validCredentials.find(u => u.user === username && u.pass === password);
                    
                    if (user) {
                        document.getElementById('loginScreen').style.display = 'none';
                        document.getElementById('appContainer').style.display = 'flex';
                        
                        // Atualizar informações do utilizador
                        document.getElementById('currentUserName').textContent = user.name;
                        document.getElementById('currentUserRole').textContent = user.role;
                        document.getElementById('topbarUserName').textContent = user.name;
                        document.getElementById('userAvatar').textContent = user.name.charAt(0);
                        document.getElementById('topbarUserAvatar').textContent = user.name.charAt(0);
                        
                        // Inicializar aplicação
                        updateDashboard();
                        showNotification('Login bem-sucedido! Bem-vindo ao BizzFlow CRM.', 'success');
                    } else {
                        showNotification('Credenciais inválidas! Utilize as credenciais de demonstração.', 'error');
                    }
                });
            }
            
            // Configurar logout
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function() {
                    document.getElementById('loginScreen').style.display = 'flex';
                    document.getElementById('appContainer').style.display = 'none';
                    showNotification('Logout realizado com sucesso!', 'info');
                });
            }
            
            // Configurar navegação do menu lateral
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', function() {
                    const page = this.getAttribute('data-page');
                    if (page) {
                        showPage(page);
                    }
                });
            });
            
            // Configurar tabs de login
            document.querySelectorAll('[data-tab]').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchLoginTab(tabId);
                });
            });
            
            // Configurar botões principais
            document.getElementById('novaVendaBtn')?.addEventListener('click', () => {
                openModal('newSaleModal');
            });
            
            document.getElementById('novaVendaModalBtn')?.addEventListener('click', () => {
                openModal('newSaleModal');
            });
            
            document.getElementById('quickSaleDashboardBtn')?.addEventListener('click', () => {
                openModal('newSaleModal');
            });
            
            document.getElementById('quickSaleBtn')?.addEventListener('click', () => {
                openModal('newSaleModal');
            });
            
            document.getElementById('novoClienteBtn')?.addEventListener('click', () => {
                openModal('addClientModal');
            });
            
            document.getElementById('novoProdutoBtn')?.addEventListener('click', () => {
                openModal('addProductModal');
            });
            
            document.getElementById('notificationBtn')?.addEventListener('click', () => {
                openModal('notificationsModal');
            });
            
            document.getElementById('novaEntradaBtn')?.addEventListener('click', () => {
                openModal('stockEntryModal');
            });
            
            document.getElementById('novaSaidaBtn')?.addEventListener('click', () => {
                openModal('stockOutputModal');
            });
            
            document.getElementById('novoPlanoBtn')?.addEventListener('click', () => {
                openModal('newPlanModal');
            });
            
            document.getElementById('novaAssinaturaBtn')?.addEventListener('click', () => {
                openModal('newSubscriptionModal');
            });
            
            document.getElementById('novoFornecedorBtn')?.addEventListener('click', () => {
                showNotification('Funcionalidade de novo fornecedor em desenvolvimento!', 'info');
            });
            
            document.getElementById('novaEncomendaBtn')?.addEventListener('click', () => {
                showNotification('Funcionalidade de nova encomenda em desenvolvimento!', 'info');
            });
            
            document.getElementById('novoMembroBtn')?.addEventListener('click', () => {
                showNotification('Funcionalidade de novo membro da equipa em desenvolvimento!', 'info');
            });
            
            // Configurar formulário de adicionar cliente
            const addClientForm = document.getElementById('addClientForm');
            if (addClientForm) {
                addClientForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const formData = {
                        name: document.getElementById('clientName').value,
                        phone: document.getElementById('clientPhone').value,
                        email: document.getElementById('clientEmail').value,
                        nif: document.getElementById('clientNIF').value,
                        address: document.getElementById('clientAddress').value,
                        type: document.getElementById('clientType').value,
                        notes: document.getElementById('clientNotes').value
                    };
                    
                    addNewClient(formData);
                });
            }
            
            // Configurar formulário de adicionar produto
            const addProductForm = document.getElementById('addProductForm');
            if (addProductForm) {
                addProductForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const formData = {
                        code: document.getElementById('productCode').value,
                        name: document.getElementById('productName').value,
                        category: document.getElementById('productCategory').value,
                        price: document.getElementById('productPrice').value,
                        cost: document.getElementById('productCost').value,
                        stock: document.getElementById('productStock').value,
                        min_stock: document.getElementById('productMinStock').value,
                        barcode: document.getElementById('productBarcode').value,
                        supplier: document.getElementById('productSupplier').value,
                        description: document.getElementById('productDescription').value
                    };
                    
                    addNewProduct(formData);
                });
            }
            
            // Configurar sistema de venda rápida (simplificado)
            const completeSaleBtn = document.getElementById('completeSaleBtn');
            if (completeSaleBtn) {
                completeSaleBtn.addEventListener('click', function() {
                    // Dados de exemplo para uma venda
                    const saleData = {
                        client_id: 1,
                        client_name: 'João Maputo',
                        items: [
                            { product_id: 1, name: 'Arroz 5kg', quantity: 2, price: 350, total: 700 },
                            { product_id: 3, name: 'Óleo 1L', quantity: 1, price: 150, total: 150 }
                        ],
                        subtotal: 850,
                        discount: 0,
                        tax: 144.5,
                        total: 994.5,
                        payment_method: 'Multicaixa',
                        amount_received: 1000,
                        change: 5.5
                    };
                    
                    addNewSale(saleData);
                });
            }
            
            // Configurar botões de funcionalidade
            document.getElementById('downloadAppBtn')?.addEventListener('click', () => {
                showNotification('A aplicação móvel está disponível nas lojas oficiais!', 'info');
            });
            
            document.getElementById('helpCenterBtn')?.addEventListener('click', () => {
                showNotification('Central de ajuda em desenvolvimento!', 'info');
            });
            
            document.getElementById('liveSupportBtn')?.addEventListener('click', () => {
                showNotification('Suporte ao vivo em desenvolvimento!', 'info');
            });
            
            document.getElementById('contactSupportBtn')?.addEventListener('click', () => {
                showNotification('Entre em contacto através do email: suporte@bizzflow.co.mz', 'info');
            });
            
            document.getElementById('reporStockBtn')?.addEventListener('click', () => {
                openModal('stockEntryModal');
            });
            
            document.getElementById('inventarioBtn')?.addEventListener('click', () => {
                showNotification('Funcionalidade de inventário em desenvolvimento!', 'info');
            });
            
            document.getElementById('importarProdutosBtn')?.addEventListener('click', () => {
                showNotification('Funcionalidade de importação em desenvolvimento!', 'info');
            });
            
            document.getElementById('novoRecebimentoBtn')?.addEventListener('click', () => {
                showNotification('Funcionalidade de novo recebimento em desenvolvimento!', 'info');
            });
            
            document.getElementById('novoPagamentoBtn')?.addEventListener('click', () => {
                showNotification('Funcionalidade de novo pagamento em desenvolvimento!', 'info');
            });
            
            document.getElementById('loadMoreSalesBtn')?.addEventListener('click', () => {
                showNotification('Carregando mais vendas...', 'info');
            });
            
            console.log('✅ Aplicação inicializada com sucesso!');
        });
    </script>
</body>
</html>
